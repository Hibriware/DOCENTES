{"ast":null,"code":"import _objectSpread from\"E:\\\\Certificados\\\\heroku\\\\pruevaparaproduccion\\\\DOCENTES\\\\itsrdocentes\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"E:\\\\Certificados\\\\heroku\\\\pruevaparaproduccion\\\\DOCENTES\\\\itsrdocentes\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"E:\\\\Certificados\\\\heroku\\\\pruevaparaproduccion\\\\DOCENTES\\\\itsrdocentes\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\Certificados\\\\heroku\\\\pruevaparaproduccion\\\\DOCENTES\\\\itsrdocentes\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React from'react';import MaterialTable from'material-table';import{crearCalificacion,updateCalificaion,getAlumnos,datalistaAlumnos}from'../../servicios/api';import'./calificaciones.css';import{id_criterios,unidadCalificacion}from'./select_temas';export var TablaCapturaCalificaciones=React.memo(function(data){console.log('memo Tabla registro ');var alumnos=data.alumnos,setcalificaciones=data.setcalificaciones,calificaciones=data.calificaciones,ccx1=data.ccx1,ccx2=data.ccx2,ccx3=data.ccx3,ccx4=data.ccx4;var guardarPromedio=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(datos){var bandera,idcalificacion;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://inicio  enviar el promedio asignado en la tabla captura_calificacion\nconsole.log('hook guardarPromedio >> '+datos.idMateria);console.log(datos);bandera=datos.materiaDocente_id;idcalificacion=datos.idcalificaciones;if(!bandera){_context.next=10;break;}if(datos.calR1===null&&datos.calR2===null&&datos.calR3===null&&datos.calR4===null){datos.calR1=0;datos.calR2=0;datos.calR3=0;datos.calR4=0;}else if(datos.calR2===null&&datos.calR3===null&&datos.calR4===null){datos.calR2=0;datos.calR3=0;datos.calR4=0;}else if(datos.calR3===null&&datos.calR4===null){datos.calR3=0;datos.calR4=0;}else if(datos.calR4===null){datos.calR4=0;}_context.next=8;return updateCalificaion(idcalificacion,datos);case 8:_context.next=18;break;case 10://crear registro para el alumno en registro calificacion\nconsole.log('unidadCalificacion  v');console.log(unidadCalificacion);_context.next=14;return crearCalificacion(datos,unidadCalificacion,id_criterios);case 14:_context.next=16;return getAlumnos(datos.idMateria,unidadCalificacion);case 16:_context.next=18;return setcalificaciones({datalistaAlumnos:datalistaAlumnos});case 18:case\"end\":return _context.stop();}}},_callee);}));return function guardarPromedio(_x){return _ref.apply(this,arguments);};}();//fin\nreturn React.createElement(\"div\",{style:{maxWidth:'100%'}},React.createElement(MaterialTable,{margin:\"none\",size:\"small\",title:\"Captura de calificaciones\",columns:alumnos.columns//columnas\n,data:calificaciones.datalistaAlumnos//filas\n,editable:{onRowUpdate:function onRowUpdate(newData,oldData){return new Promise(function(resolve){setTimeout(function(){resolve();if(oldData){setcalificaciones(function(prevState){var datalistaAlumnos=_toConsumableArray(prevState.datalistaAlumnos);//obtenr data\nconsole.log(ccx1);console.log('ccx1*');console.log(newData.calCriterio1=newData.calR1*(ccx1/100));console.log(newData.calCriterio2=newData.calR2*(ccx2/100));console.log(newData.calCriterio3=newData.calR3*(ccx3/100));console.log(newData.calCriterio4=newData.calR4*(ccx4/100));console.log(newData.calificaciontotal=parseInt(newData.calCriterio1)+parseInt(newData.calCriterio2)+parseInt(newData.calCriterio3)+parseInt(newData.calCriterio4));console.log(newData);//estado fila modificado\ndatalistaAlumnos[datalistaAlumnos.indexOf(oldData)]=newData;guardarPromedio(newData);return _objectSpread({},prevState,{datalistaAlumnos:datalistaAlumnos});});}},600);});}},options:{headerStyle:{backgroundColor:'#01579b',color:'#FFF',size:'small'},rowStyle:{white:'pre'}}}));});","map":{"version":3,"sources":["E:/Certificados/heroku/pruevaparaproduccion/DOCENTES/itsrdocentes/src/componentes/contenedores/docente_calificaciones/Tabla_registro.js"],"names":["React","MaterialTable","crearCalificacion","updateCalificaion","getAlumnos","datalistaAlumnos","id_criterios","unidadCalificacion","TablaCapturaCalificaciones","memo","data","console","log","alumnos","setcalificaciones","calificaciones","ccx1","ccx2","ccx3","ccx4","guardarPromedio","datos","idMateria","bandera","materiaDocente_id","idcalificacion","idcalificaciones","calR1","calR2","calR3","calR4","maxWidth","columns","onRowUpdate","newData","oldData","Promise","resolve","setTimeout","prevState","calCriterio1","calCriterio2","calCriterio3","calCriterio4","calificaciontotal","parseInt","indexOf","headerStyle","backgroundColor","color","size","rowStyle","white"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport MaterialTable from 'material-table';\r\nimport { crearCalificacion, updateCalificaion, getAlumnos, datalistaAlumnos } from '../../servicios/api';\r\nimport './calificaciones.css';\r\nimport { id_criterios, unidadCalificacion } from './select_temas';\r\n\r\n\r\n\r\nexport const TablaCapturaCalificaciones = React.memo((data) => {\r\n  console.log('memo Tabla registro ')\r\n  const { alumnos, setcalificaciones, calificaciones, ccx1, ccx2, ccx3, ccx4 } = data;\r\n\r\n  const guardarPromedio = async (datos) => {//inicio  enviar el promedio asignado en la tabla captura_calificacion\r\n\r\n    console.log('hook guardarPromedio >> ' + datos.idMateria)\r\n    console.log(datos)\r\n\r\n    let bandera = datos.materiaDocente_id;\r\n    let idcalificacion = datos.idcalificaciones;\r\n\r\n    if (bandera) {\r\n      if(datos.calR1 === null && datos.calR2 === null && datos.calR3 === null && datos.calR4 === null){\r\n        datos.calR1 = 0;\r\n        datos.calR2 = 0;\r\n        datos.calR3 = 0;\r\n        datos.calR4 = 0;\r\n      }\r\n      else if (datos.calR2 === null && datos.calR3 === null && datos.calR4 === null) {\r\n        datos.calR2 = 0;\r\n        datos.calR3 = 0;\r\n        datos.calR4 = 0;\r\n      } else if (datos.calR3 === null && datos.calR4 === null) {\r\n        datos.calR3 = 0;\r\n        datos.calR4 = 0;\r\n      } else if (datos.calR4 === null) {\r\n        datos.calR4 = 0;\r\n      }\r\n      await updateCalificaion(idcalificacion, datos)\r\n    } else {//crear registro para el alumno en registro calificacion\r\n      console.log('unidadCalificacion  v')\r\n\r\n      console.log(unidadCalificacion)\r\n      await crearCalificacion(datos, unidadCalificacion, id_criterios);\r\n      await getAlumnos(datos.idMateria, unidadCalificacion);//LISTA DE ALUMNOS\r\n      await setcalificaciones({ datalistaAlumnos: datalistaAlumnos });\r\n    }\r\n  }//fin\r\n\r\n\r\n  return (\r\n    <div style={{maxWidth:'100%'}}>\r\n    <MaterialTable  margin=\"none\" size=\"small\"\r\n      title=\"Captura de calificaciones\"\r\n      columns={alumnos.columns}//columnas\r\n      data={calificaciones.datalistaAlumnos}//filas\r\n      editable={\r\n        {\r\n          onRowUpdate: (newData, oldData) =>\r\n            new Promise(resolve => {\r\n              setTimeout(() => {\r\n                resolve();\r\n                if (oldData) {\r\n                  setcalificaciones(prevState => {\r\n                    const datalistaAlumnos = [...prevState.datalistaAlumnos];//obtenr data\r\n                    console.log(ccx1)\r\n                    console.log('ccx1*')\r\n\r\n                    console.log(newData.calCriterio1 = (newData.calR1 * (ccx1 / 100)))\r\n                    console.log(newData.calCriterio2 = (newData.calR2 * (ccx2 / 100)))\r\n                    console.log(newData.calCriterio3 = (newData.calR3 * (ccx3 / 100)))\r\n                    console.log(newData.calCriterio4 = (newData.calR4 * (ccx4 / 100)))\r\n                    console.log(newData.calificaciontotal = (parseInt(newData.calCriterio1) + parseInt(newData.calCriterio2) + parseInt(newData.calCriterio3) + parseInt(newData.calCriterio4)))\r\n                    console.log(newData)//estado fila modificado\r\n                    datalistaAlumnos[datalistaAlumnos.indexOf(oldData)] = newData;\r\n                    guardarPromedio(newData)\r\n                    return { ...prevState, datalistaAlumnos };\r\n                  });\r\n                }\r\n              }, 600);\r\n            }),\r\n        }\r\n      }\r\n      options={{\r\n        headerStyle: {\r\n          backgroundColor: '#01579b',\r\n          color: '#FFF',\r\n          size: 'small'\r\n        },\r\n        rowStyle: {\r\n          white: 'pre',\r\n        },\r\n      }} />\r\n      </div>\r\n  );\r\n})"]},"metadata":{},"sourceType":"module"}