{"ast":null,"code":"var _jsxFileName = \"E:\\\\Certificados\\\\itsrdocentes\\\\itsrdocentes\\\\src\\\\componentes\\\\contenedores\\\\docente_calificaciones\\\\reportes\\\\parciales\\\\parciales.js\";\nimport React from 'react';\nimport { Buttons } from '../button/button';\nimport moment from 'moment';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport Itsr from '../../../../img/Logo-Tec.png';\nimport { dataMateria } from '../../../../../home';\nimport { getReporteHorarios, getReporteParcial, dataReportHorario, dataPeriodo, dataReporteParciales } from '../../../../servicios/api';\nvar newListaParciales = [];\nexport const ReportParciales = data => {\n  console.log(data);\n\n  const infPdf = async () => {\n    console.log(\"imprimiendo.... .\");\n\n    try {\n      const DOCENTE_ACTUAL = dataMateria[0].nameDocente;\n\n      for (let index = 0; index < dataMateria.length; index++) {\n        const ID_MATERIA = dataMateria[index].idMateria;\n        const PERIODO = dataMateria[index].idnomenclaturaPeriodo;\n        const GRUPO = dataMateria[index].idGrupos;\n        const Materia = dataMateria[index].nombre; //periodo materia personal grupo\n\n        await Promise.all([getReporteHorarios(PERIODO, ID_MATERIA, GRUPO), getReporteParcial(ID_MATERIA, GRUPO)]);\n        await lista();\n        await pdf(Materia, DOCENTE_ACTUAL);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  /*\r\n  nombreAspirante: \"FRANCISCO JAVIER\"\r\n  numeroControl: \"20E20001\"\r\n  tema1: \"88\"\r\n  tema2: \"91\"\r\n  tema3: \"90\"\r\n  tema4: \"\"\r\n  tema5: \"\"\r\n  tema6: \"\"\r\n  tema7: \"\"\r\n  tema8: \"\"\r\n  tema9: \"\"\r\n  tema10: \"\"*/\n\n\n  const lista = () => {\n    var nm = 1;\n\n    for (let index2 = 0; index2 < dataReporteParciales.length; index2++) {\n      let tema1 = parseInt(dataReporteParciales[index2].tema1 || 0),\n          tema2 = parseInt(dataReporteParciales[index2].tema2 || 0),\n          tema3 = parseInt(dataReporteParciales[index2].tema3 || 0),\n          tema4 = parseInt(dataReporteParciales[index2].tema4 || 0),\n          tema5 = parseInt(dataReporteParciales[index2].tema5 || 0),\n          tema6 = parseInt(dataReporteParciales[index2].tema6 || 0),\n          tema7 = parseInt(dataReporteParciales[index2].tema7 || 0),\n          tema8 = parseInt(dataReporteParciales[index2].tema8 || 0),\n          tema9 = parseInt(dataReporteParciales[index2].tema9 || 0),\n          tema10 = parseInt(dataReporteParciales[index2].tema10 || 0);\n      let eliminar = [{\n        n: tema1\n      }, {\n        n: tema2\n      }, {\n        n: tema3\n      }, {\n        n: tema4\n      }, {\n        n: tema5\n      }, {\n        n: tema6\n      }, {\n        n: tema7\n      }, {\n        n: tema8\n      }, {\n        n: tema9\n      }, {\n        n: tema10\n      }];\n      var promediar = eliminar.filter(function (n) {\n        return n.n !== 0;\n      });\n      let TOTAL = parseInt((tema1 + tema2 + tema3 + tema4 + tema5 + tema6 + tema7 + tema8 + tema9 + tema10) / promediar.length);\n      newListaParciales[index2] = {\n        nm: nm,\n        nombreAspirante: dataReporteParciales[index2].nombreAspirante,\n        numeroControl: dataReporteParciales[index2].numeroControl,\n        tema1: tema1,\n        tema2: tema2,\n        tema3: tema3,\n        tema4: tema4,\n        tema5: tema5,\n        tema6: tema6,\n        tema7: tema7,\n        tema8: tema8,\n        tema9: tema9,\n        tema10: tema10,\n        Total: TOTAL\n      };\n      nm++;\n    } // aprobacion y reprobacion\n\n\n    const aprobacion = () => {//let temasN =[{tema1:tema1},{tema2:tema2},{tema3:tema3},{tema4:tema4},{tema5:tema5},{tema6:tema6},{tema7:tema7},{tema8:tema8},{tema9:tema9},{tema10:tema10}]\n    };\n\n    var sumaTema1 = 0;\n    var temaTotal = newListaParciales.filter(function (tem) {\n      sumaTema1 = sumaTema1 + tem.tema1;\n      return tem.tema1 !== 0;\n    });\n    console.log('______filtro aprobacion_______');\n    console.log(temaTotal / temaTotal.length);\n    console.log('______Tema 1_______ ' + sumaTema1); //console.log('_____________ lista')\n    //console.log(newListaParciales)\n    //console.log('_____________')\n  };\n\n  var sduper = [{\n    nm: 1,\n    numeroControl: \"20E20004\",\n    nombre: \"SARAHI MARLENE MALDONADO JUAREZ\",\n    modalidad: \"\"\n  }, {\n    nm: 2,\n    numeroControl: \"20E20002\",\n    nombre: \"ERICK MOISES HERRERA  DE LA CRUZ\",\n    modalidad: \"\"\n  }, {\n    nm: 3,\n    numeroControl: \"20E20011\",\n    nombre: \"JORGE ARCOS VAZQUEZ\",\n    modalidad: \"\"\n  }, {\n    nm: 4,\n    numeroControl: \"20E20006\",\n    nombre: \"RODRIGO MORALES PEREZ\",\n    modalidad: \"\"\n  }, {\n    nm: 5,\n    numeroControl: \"20E20010\",\n    nombre: \"CRISTOPHER LUIS LÓPEZ ARRAIZ\",\n    modalidad: \"\"\n  }];\n\n  const pdf = (nomMateria, docente_actual) => {\n    const Horas_clases = dataReportHorario[0].semanas;\n    const Grupo = dataReportHorario[0].grupo;\n    const Semestre = dataReportHorario[0].semestre;\n    var img = new Image();\n    img.src = Itsr;\n    const pdf = new jsPDF('p', 'pt', 'letter'); //body\n\n    var columns = [{\n      title: \"Nº\",\n      dataKey: \"nm\"\n    }, {\n      title: \"CONTROL\",\n      dataKey: \"numeroControl\"\n    }, {\n      title: \"ESTUDIANTES\",\n      dataKey: \"nombreAspirante\"\n    }, {\n      title: \"O1\",\n      dataKey: \"tema1\"\n    }, {\n      title: \"02\",\n      dataKey: \"tema2\"\n    }, {\n      title: \"03\",\n      dataKey: \"tema3\"\n    }, {\n      title: \"04\",\n      dataKey: \"tema4\"\n    }, {\n      title: \"05\",\n      dataKey: \"tema5\"\n    }, {\n      title: \"06\",\n      dataKey: \"tema6\"\n    }, {\n      title: \"07\",\n      dataKey: \"tema7\"\n    }, {\n      title: \"08\",\n      dataKey: \"tema8\"\n    }, {\n      title: \"09\",\n      dataKey: \"tema9\"\n    }, {\n      title: \"10\",\n      dataKey: \"tema10\"\n    }, {\n      title: \"CAL\",\n      dataKey: \"Total\"\n    }, {\n      title: \"TC\",\n      dataKey: \"modalidad\"\n    }];\n    pdf.autoTable(columns, newListaParciales, {\n      margin: {\n        top: 75\n      },\n      styles: {\n        halign: 'center',\n        cellPadding: 0.5,\n        fontSize: 7\n      },\n      theme: 'grid'\n    }); //piede paginas\n\n    const pageCount = pdf.internal.getNumberOfPages();\n\n    for (var i = 1; i <= pageCount; i++) {\n      pdf.setPage(i);\n      pdf.setFontSize(14); //encabezado\n\n      pdf.text(130, 15, 'INSTITUTO TECNOLÓGICO SUPERIOR DE LOS RÍOS');\n      pdf.line(100, 17, 500, 17); // horizontal line\n\n      pdf.setFontSize(8);\n      pdf.text(262, 26, \"PRELISTA CON PARCIALES\");\n      pdf.roundedRect(102, 45, 400, 12, 3, 3);\n      pdf.setFontSize(8);\n      pdf.text(100, 40, `MATERIA: ${nomMateria}`);\n      pdf.setFontSize(8);\n      pdf.text(500, 31, `PERIODO: ${dataPeriodo[0].rango}`);\n      pdf.setFontSize(8);\n      pdf.text(500, 40, `FECHA: ${moment().format('L')}`);\n      pdf.setFontSize(7);\n      pdf.text(122, 54, Horas_clases);\n      pdf.setFontSize(8);\n      pdf.text(500, 66, `GRUPO: ${Semestre} ${Grupo}`);\n      pdf.setFontSize(8);\n      pdf.text(100, 66, `DOCENTE: ${docente_actual}`);\n      pdf.addImage(img, 'PNG', 13, 10, 63, 63);\n      pdf.setFontSize(7); //pie de pagina\n\n      pdf.text(20, 760, \"C (Curso, R:Repetición, E:Especial)\");\n      pdf.setLineWidth(1.6);\n      pdf.line(390, 760, 500, 760);\n      pdf.setFontSize(7);\n      pdf.text(413, 767, \"FIRMA DOCENTE\");\n      pdf.text(20, 770, 'Pagina' + String(i) + ' de ' + String(pageCount), null, null, null, null, \"right\");\n    }\n\n    pdf.save(`PARCIALES ${nomMateria}.pdf`);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(Buttons, {\n    texto: \"Calificaciones Parciales\",\n    onGenerar: infPdf,\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }));\n};","map":{"version":3,"sources":["E:/Certificados/itsrdocentes/itsrdocentes/src/componentes/contenedores/docente_calificaciones/reportes/parciales/parciales.js"],"names":["React","Buttons","moment","jsPDF","Itsr","dataMateria","getReporteHorarios","getReporteParcial","dataReportHorario","dataPeriodo","dataReporteParciales","newListaParciales","ReportParciales","data","console","log","infPdf","DOCENTE_ACTUAL","nameDocente","index","length","ID_MATERIA","idMateria","PERIODO","idnomenclaturaPeriodo","GRUPO","idGrupos","Materia","nombre","Promise","all","lista","pdf","error","nm","index2","tema1","parseInt","tema2","tema3","tema4","tema5","tema6","tema7","tema8","tema9","tema10","eliminar","n","promediar","filter","TOTAL","nombreAspirante","numeroControl","Total","aprobacion","sumaTema1","temaTotal","tem","sduper","modalidad","nomMateria","docente_actual","Horas_clases","semanas","Grupo","grupo","Semestre","semestre","img","Image","src","columns","title","dataKey","autoTable","margin","top","styles","halign","cellPadding","fontSize","theme","pageCount","internal","getNumberOfPages","i","setPage","setFontSize","text","line","roundedRect","rango","format","addImage","setLineWidth","String","save"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,iBAAP;AACA,OAAOC,IAAP,MAAiB,8BAAjB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,kBAAT,EAA6BC,iBAA7B,EAAgDC,iBAAhD,EAAmEC,WAAnE,EAAgFC,oBAAhF,QAA4G,2BAA5G;AAEA,IAAIC,iBAAiB,GAAG,EAAxB;AACA,OAAO,MAAMC,eAAe,GAAIC,IAAD,IAAU;AACrCC,EAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AAEA,QAAMG,MAAM,GAAG,YAAY;AACvBF,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;;AACA,QAAI;AACA,YAAME,cAAc,GAAGZ,WAAW,CAAC,CAAD,CAAX,CAAea,WAAtC;;AACA,WAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGd,WAAW,CAACe,MAAxC,EAAgDD,KAAK,EAArD,EAAyD;AACrD,cAAME,UAAU,GAAGhB,WAAW,CAACc,KAAD,CAAX,CAAmBG,SAAtC;AACA,cAAMC,OAAO,GAAGlB,WAAW,CAACc,KAAD,CAAX,CAAmBK,qBAAnC;AACA,cAAMC,KAAK,GAAGpB,WAAW,CAACc,KAAD,CAAX,CAAmBO,QAAjC;AACA,cAAMC,OAAO,GAAGtB,WAAW,CAACc,KAAD,CAAX,CAAmBS,MAAnC,CAJqD,CAKrD;;AACA,cAAMC,OAAO,CAACC,GAAR,CAAY,CAACxB,kBAAkB,CAACiB,OAAD,EAAUF,UAAV,EAAsBI,KAAtB,CAAnB,EAAiDlB,iBAAiB,CAACc,UAAD,EAAaI,KAAb,CAAlE,CAAZ,CAAN;AACA,cAAMM,KAAK,EAAX;AACA,cAAMC,GAAG,CAACL,OAAD,EAAUV,cAAV,CAAT;AAGH;AAEJ,KAfD,CAeE,OAAOgB,KAAP,EAAc;AACZnB,MAAAA,OAAO,CAACC,GAAR,CAAYkB,KAAZ;AACH;AACJ,GApBD;AAsBJ;;;;;;;;;;;;;;;AAaC,QAAMF,KAAK,GAAG,MAAM;AACjB,QAAIG,EAAE,GAAC,CAAP;;AACA,SAAK,IAAIC,MAAM,GAAG,CAAlB,EAAqBA,MAAM,GAAGzB,oBAAoB,CAACU,MAAnD,EAA2De,MAAM,EAAjE,EAAqE;AAEjE,UACAC,KAAK,GAAEC,QAAQ,CAAC3B,oBAAoB,CAACyB,MAAD,CAApB,CAA6BC,KAA7B,IAAsC,CAAvC,CADf;AAAA,UAEAE,KAAK,GAAED,QAAQ,CAAC3B,oBAAoB,CAACyB,MAAD,CAApB,CAA6BG,KAA7B,IAAsC,CAAvC,CAFf;AAAA,UAGAC,KAAK,GAAEF,QAAQ,CAAC3B,oBAAoB,CAACyB,MAAD,CAApB,CAA6BI,KAA7B,IAAsC,CAAvC,CAHf;AAAA,UAIAC,KAAK,GAAEH,QAAQ,CAAC3B,oBAAoB,CAACyB,MAAD,CAApB,CAA6BK,KAA7B,IAAsC,CAAvC,CAJf;AAAA,UAKAC,KAAK,GAAEJ,QAAQ,CAAC3B,oBAAoB,CAACyB,MAAD,CAApB,CAA6BM,KAA7B,IAAsC,CAAvC,CALf;AAAA,UAMAC,KAAK,GAAEL,QAAQ,CAAC3B,oBAAoB,CAACyB,MAAD,CAApB,CAA6BO,KAA7B,IAAsC,CAAvC,CANf;AAAA,UAOAC,KAAK,GAAEN,QAAQ,CAAC3B,oBAAoB,CAACyB,MAAD,CAApB,CAA6BQ,KAA7B,IAAsC,CAAvC,CAPf;AAAA,UAQAC,KAAK,GAAEP,QAAQ,CAAC3B,oBAAoB,CAACyB,MAAD,CAApB,CAA6BS,KAA7B,IAAsC,CAAvC,CARf;AAAA,UASAC,KAAK,GAAER,QAAQ,CAAC3B,oBAAoB,CAACyB,MAAD,CAApB,CAA6BU,KAA7B,IAAsC,CAAvC,CATf;AAAA,UAUAC,MAAM,GAAET,QAAQ,CAAC3B,oBAAoB,CAACyB,MAAD,CAApB,CAA6BW,MAA7B,IAAuC,CAAxC,CAVhB;AAYA,UAAIC,QAAQ,GAAE,CAAC;AAACC,QAAAA,CAAC,EAACZ;AAAH,OAAD,EAAW;AAACY,QAAAA,CAAC,EAACV;AAAH,OAAX,EAAqB;AAACU,QAAAA,CAAC,EAACT;AAAH,OAArB,EAA+B;AAACS,QAAAA,CAAC,EAACR;AAAH,OAA/B,EAAyC;AAACQ,QAAAA,CAAC,EAACP;AAAH,OAAzC,EAAmD;AAACO,QAAAA,CAAC,EAACN;AAAH,OAAnD,EAA6D;AAACM,QAAAA,CAAC,EAACL;AAAH,OAA7D,EAAuE;AAACK,QAAAA,CAAC,EAACJ;AAAH,OAAvE,EAAiF;AAACI,QAAAA,CAAC,EAACH;AAAH,OAAjF,EAA2F;AAACG,QAAAA,CAAC,EAACF;AAAH,OAA3F,CAAd;AACA,UAAIG,SAAS,GAAGF,QAAQ,CAACG,MAAT,CAAgB,UAASF,CAAT,EAAY;AAExC,eAAOA,CAAC,CAACA,CAAF,KAAQ,CAAf;AACH,OAHe,CAAhB;AAKA,UAAIG,KAAK,GAACd,QAAQ,CAAC,CAACD,KAAK,GAACE,KAAN,GAAYC,KAAZ,GAAkBC,KAAlB,GAAwBC,KAAxB,GAA8BC,KAA9B,GAAoCC,KAApC,GAA0CC,KAA1C,GAAgDC,KAAhD,GAAsDC,MAAvD,IAA+DG,SAAS,CAAC7B,MAA1E,CAAlB;AAEAT,MAAAA,iBAAiB,CAACwB,MAAD,CAAjB,GAA6B;AACzBD,QAAAA,EAAE,EAACA,EADsB;AAEzBkB,QAAAA,eAAe,EAAE1C,oBAAoB,CAACyB,MAAD,CAApB,CAA6BiB,eAFrB;AAGzBC,QAAAA,aAAa,EAAC3C,oBAAoB,CAACyB,MAAD,CAApB,CAA6BkB,aAHlB;AAIzBjB,QAAAA,KAAK,EAAEA,KAJkB;AAKzBE,QAAAA,KAAK,EAAEA,KALkB;AAMzBC,QAAAA,KAAK,EAAEA,KANkB;AAOzBC,QAAAA,KAAK,EAAEA,KAPkB;AAQzBC,QAAAA,KAAK,EAAEA,KARkB;AASzBC,QAAAA,KAAK,EAAEA,KATkB;AAUzBC,QAAAA,KAAK,EAACA,KAVmB;AAWzBC,QAAAA,KAAK,EAAEA,KAXkB;AAYzBC,QAAAA,KAAK,EAAEA,KAZkB;AAazBC,QAAAA,MAAM,EAAEA,MAbiB;AAczBQ,QAAAA,KAAK,EAACH;AAdmB,OAA7B;AAgBAjB,MAAAA,EAAE;AACL,KAzCgB,CA0CjB;;;AACA,UAAMqB,UAAU,GAAG,MAAI,CACnB;AAEH,KAHD;;AAIA,QAAIC,SAAS,GAAC,CAAd;AACA,QAAIC,SAAS,GAAG9C,iBAAiB,CAACuC,MAAlB,CAAyB,UAASQ,GAAT,EAAc;AACnDF,MAAAA,SAAS,GAAGA,SAAS,GAAGE,GAAG,CAACtB,KAA5B;AACA,aAAOsB,GAAG,CAACtB,KAAJ,KAAc,CAArB;AACH,KAHe,CAAhB;AAKAtB,IAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY0C,SAAS,GAACA,SAAS,CAACrC,MAAhC;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAuByC,SAAnC,EAvDiB,CA0DjB;AACA;AACA;AAEF,GA9DD;;AAiEG,MAAIG,MAAM,GAAG,CACT;AAAEzB,IAAAA,EAAE,EAAE,CAAN;AAASmB,IAAAA,aAAa,EAAE,UAAxB;AAAoCzB,IAAAA,MAAM,EAAE,iCAA5C;AAA+EgC,IAAAA,SAAS,EAAE;AAA1F,GADS,EAET;AAAE1B,IAAAA,EAAE,EAAE,CAAN;AAASmB,IAAAA,aAAa,EAAE,UAAxB;AAAoCzB,IAAAA,MAAM,EAAE,kCAA5C;AAAgFgC,IAAAA,SAAS,EAAE;AAA3F,GAFS,EAGT;AAAE1B,IAAAA,EAAE,EAAE,CAAN;AAASmB,IAAAA,aAAa,EAAE,UAAxB;AAAoCzB,IAAAA,MAAM,EAAE,qBAA5C;AAAmEgC,IAAAA,SAAS,EAAE;AAA9E,GAHS,EAIT;AAAE1B,IAAAA,EAAE,EAAE,CAAN;AAASmB,IAAAA,aAAa,EAAE,UAAxB;AAAoCzB,IAAAA,MAAM,EAAE,uBAA5C;AAAqEgC,IAAAA,SAAS,EAAE;AAAhF,GAJS,EAKT;AAAE1B,IAAAA,EAAE,EAAE,CAAN;AAASmB,IAAAA,aAAa,EAAE,UAAxB;AAAoCzB,IAAAA,MAAM,EAAE,8BAA5C;AAA4EgC,IAAAA,SAAS,EAAE;AAAvF,GALS,CAAb;;AAQA,QAAM5B,GAAG,GAAG,CAAC6B,UAAD,EAAaC,cAAb,KAAgC;AACxC,UAAMC,YAAY,GAAGvD,iBAAiB,CAAC,CAAD,CAAjB,CAAqBwD,OAA1C;AACA,UAAMC,KAAK,GAAGzD,iBAAiB,CAAC,CAAD,CAAjB,CAAqB0D,KAAnC;AACA,UAAMC,QAAQ,GAAG3D,iBAAiB,CAAC,CAAD,CAAjB,CAAqB4D,QAAtC;AAEA,QAAIC,GAAG,GAAG,IAAIC,KAAJ,EAAV;AACAD,IAAAA,GAAG,CAACE,GAAJ,GAAUnE,IAAV;AAEA,UAAM4B,GAAG,GAAG,IAAI7B,KAAJ,CAAU,GAAV,EAAe,IAAf,EAAqB,QAArB,CAAZ,CARwC,CASxC;;AAEA,QAAIqE,OAAO,GAAG,CACV;AAAEC,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KADU,EAEV;AAAED,MAAAA,KAAK,EAAE,SAAT;AAAoBC,MAAAA,OAAO,EAAE;AAA7B,KAFU,EAGV;AAAED,MAAAA,KAAK,EAAE,aAAT;AAAwBC,MAAAA,OAAO,EAAE;AAAjC,KAHU,EAIV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KAJU,EAKV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KALU,EAMV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KANU,EAOV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KAPU,EAQV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KARU,EASV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KATU,EAUV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KAVU,EAWV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KAXU,EAYV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KAZU,EAaV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KAbU,EAcV;AAAED,MAAAA,KAAK,EAAE,KAAT;AAAgBC,MAAAA,OAAO,EAAE;AAAzB,KAdU,EAeV;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KAfU,CAAd;AAkBA1C,IAAAA,GAAG,CAAC2C,SAAJ,CAAcH,OAAd,EAAuB7D,iBAAvB,EACI;AACIiE,MAAAA,MAAM,EAAE;AAAEC,QAAAA,GAAG,EAAE;AAAP,OADZ;AAEIC,MAAAA,MAAM,EAAE;AAAEC,QAAAA,MAAM,EAAE,QAAV;AAAoBC,QAAAA,WAAW,EAAE,GAAjC;AAAsCC,QAAAA,QAAQ,EAAE;AAAhD,OAFZ;AAGIC,MAAAA,KAAK,EAAE;AAHX,KADJ,EA7BwC,CAuCxC;;AACA,UAAMC,SAAS,GAAGnD,GAAG,CAACoD,QAAJ,CAAaC,gBAAb,EAAlB;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIH,SAArB,EAAgCG,CAAC,EAAjC,EAAqC;AACjCtD,MAAAA,GAAG,CAACuD,OAAJ,CAAYD,CAAZ;AAGAtD,MAAAA,GAAG,CAACwD,WAAJ,CAAgB,EAAhB,EAJiC,CAId;;AACnBxD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,GAAT,EAAc,EAAd,EAAkB,4CAAlB;AACAzD,MAAAA,GAAG,CAAC0D,IAAJ,CAAS,GAAT,EAAc,EAAd,EAAkB,GAAlB,EAAuB,EAAvB,EANiC,CAMN;;AAC3B1D,MAAAA,GAAG,CAACwD,WAAJ,CAAgB,CAAhB;AACAxD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,GAAT,EAAc,EAAd,EAAkB,wBAAlB;AACAzD,MAAAA,GAAG,CAAC2D,WAAJ,CAAgB,GAAhB,EAAqB,EAArB,EAAyB,GAAzB,EAA8B,EAA9B,EAAkC,CAAlC,EAAqC,CAArC;AACA3D,MAAAA,GAAG,CAACwD,WAAJ,CAAgB,CAAhB;AACAxD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,GAAT,EAAc,EAAd,EAAmB,YAAW5B,UAAW,EAAzC;AACA7B,MAAAA,GAAG,CAACwD,WAAJ,CAAgB,CAAhB;AACAxD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,GAAT,EAAc,EAAd,EAAmB,YAAWhF,WAAW,CAAC,CAAD,CAAX,CAAemF,KAAM,EAAnD;AACA5D,MAAAA,GAAG,CAACwD,WAAJ,CAAgB,CAAhB;AACAxD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,GAAT,EAAc,EAAd,EAAmB,UAASvF,MAAM,GAAG2F,MAAT,CAAgB,GAAhB,CAAqB,EAAjD;AACA7D,MAAAA,GAAG,CAACwD,WAAJ,CAAgB,CAAhB;AACAxD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,GAAT,EAAc,EAAd,EAAkB1B,YAAlB;AACA/B,MAAAA,GAAG,CAACwD,WAAJ,CAAgB,CAAhB;AACAxD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,GAAT,EAAc,EAAd,EAAmB,UAAStB,QAAS,IAAGF,KAAM,EAA9C;AACAjC,MAAAA,GAAG,CAACwD,WAAJ,CAAgB,CAAhB;AACAxD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,GAAT,EAAc,EAAd,EAAmB,YAAW3B,cAAe,EAA7C;AACA9B,MAAAA,GAAG,CAAC8D,QAAJ,CAAazB,GAAb,EAAkB,KAAlB,EAAyB,EAAzB,EAA6B,EAA7B,EAAiC,EAAjC,EAAqC,EAArC;AAGArC,MAAAA,GAAG,CAACwD,WAAJ,CAAgB,CAAhB,EAzBiC,CAyBf;;AAClBxD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,EAAT,EAAa,GAAb,EAAkB,qCAAlB;AACAzD,MAAAA,GAAG,CAAC+D,YAAJ,CAAiB,GAAjB;AACA/D,MAAAA,GAAG,CAAC0D,IAAJ,CAAS,GAAT,EAAc,GAAd,EAAmB,GAAnB,EAAwB,GAAxB;AACA1D,MAAAA,GAAG,CAACwD,WAAJ,CAAgB,CAAhB;AACAxD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,GAAT,EAAc,GAAd,EAAmB,eAAnB;AACAzD,MAAAA,GAAG,CAACyD,IAAJ,CAAS,EAAT,EAAa,GAAb,EAAkB,WAAWO,MAAM,CAACV,CAAD,CAAjB,GAAuB,MAAvB,GAAgCU,MAAM,CAACb,SAAD,CAAxD,EAAqE,IAArE,EAA2E,IAA3E,EAAiF,IAAjF,EAAuF,IAAvF,EAA6F,OAA7F;AACH;;AACDnD,IAAAA,GAAG,CAACiE,IAAJ,CAAU,aAAYpC,UAAW,MAAjC;AAEH,GA5ED;;AA8EA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,OAAD;AAAS,IAAA,KAAK,EAAC,0BAAf;AAA0C,IAAA,SAAS,EAAE7C,MAArD;AAA6D,IAAA,KAAK,EAAC,SAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ;AAKH,CAlMM","sourcesContent":["import React from 'react';\r\nimport { Buttons } from '../button/button';\r\nimport moment from 'moment';\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\nimport Itsr from '../../../../img/Logo-Tec.png';\r\nimport { dataMateria } from '../../../../../home';\r\nimport { getReporteHorarios, getReporteParcial, dataReportHorario, dataPeriodo, dataReporteParciales } from '../../../../servicios/api';\r\n\r\nvar newListaParciales = [];\r\nexport const ReportParciales = (data) => {\r\n    console.log(data)\r\n\r\n    const infPdf = async () => {\r\n        console.log(\"imprimiendo.... .\")\r\n        try {\r\n            const DOCENTE_ACTUAL = dataMateria[0].nameDocente;\r\n            for (let index = 0; index < dataMateria.length; index++) {\r\n                const ID_MATERIA = dataMateria[index].idMateria;\r\n                const PERIODO = dataMateria[index].idnomenclaturaPeriodo;\r\n                const GRUPO = dataMateria[index].idGrupos;\r\n                const Materia = dataMateria[index].nombre;\r\n                //periodo materia personal grupo\r\n                await Promise.all([getReporteHorarios(PERIODO, ID_MATERIA, GRUPO), getReporteParcial(ID_MATERIA, GRUPO)])\r\n                await lista()\r\n                await pdf(Materia, DOCENTE_ACTUAL)\r\n\r\n                \r\n            }\r\n           \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n/*\r\nnombreAspirante: \"FRANCISCO JAVIER\"\r\nnumeroControl: \"20E20001\"\r\ntema1: \"88\"\r\ntema2: \"91\"\r\ntema3: \"90\"\r\ntema4: \"\"\r\ntema5: \"\"\r\ntema6: \"\"\r\ntema7: \"\"\r\ntema8: \"\"\r\ntema9: \"\"\r\ntema10: \"\"*/\r\n const lista = () => {\r\n    var nm=1\r\n    for (let index2 = 0; index2 < dataReporteParciales.length; index2++) {\r\n        \r\n        let \r\n        tema1= parseInt(dataReporteParciales[index2].tema1 || 0),\r\n        tema2= parseInt(dataReporteParciales[index2].tema2 || 0),\r\n        tema3= parseInt(dataReporteParciales[index2].tema3 || 0),\r\n        tema4= parseInt(dataReporteParciales[index2].tema4 || 0),\r\n        tema5= parseInt(dataReporteParciales[index2].tema5 || 0), \r\n        tema6= parseInt(dataReporteParciales[index2].tema6 || 0),\r\n        tema7= parseInt(dataReporteParciales[index2].tema7 || 0),\r\n        tema8= parseInt(dataReporteParciales[index2].tema8 || 0),\r\n        tema9= parseInt(dataReporteParciales[index2].tema9 || 0),\r\n        tema10= parseInt(dataReporteParciales[index2].tema10 || 0);\r\n\r\n        let eliminar =[{n:tema1},{n:tema2},{n:tema3},{n:tema4},{n:tema5},{n:tema6},{n:tema7},{n:tema8},{n:tema9},{n:tema10}]\r\n        var promediar = eliminar.filter(function(n) {\r\n\r\n            return n.n !== 0; \r\n        });\r\n\r\n        let TOTAL=parseInt((tema1+tema2+tema3+tema4+tema5+tema6+tema7+tema8+tema9+tema10)/promediar.length)\r\n\r\n        newListaParciales[index2]  = { \r\n            nm:nm,\r\n            nombreAspirante: dataReporteParciales[index2].nombreAspirante, \r\n            numeroControl:dataReporteParciales[index2].numeroControl,\r\n            tema1: tema1,\r\n            tema2: tema2,\r\n            tema3: tema3,\r\n            tema4: tema4,\r\n            tema5: tema5,\r\n            tema6: tema6,\r\n            tema7:tema7,\r\n            tema8: tema8,\r\n            tema9: tema9,\r\n            tema10: tema10,\r\n            Total:TOTAL\r\n        };\r\n        nm++\r\n    }\r\n    // aprobacion y reprobacion\r\n    const aprobacion = ()=>{\r\n        //let temasN =[{tema1:tema1},{tema2:tema2},{tema3:tema3},{tema4:tema4},{tema5:tema5},{tema6:tema6},{tema7:tema7},{tema8:tema8},{tema9:tema9},{tema10:tema10}]\r\n        \r\n    }\r\n    var sumaTema1=0;\r\n    var temaTotal = newListaParciales.filter(function(tem) {\r\n        sumaTema1 = sumaTema1 + tem.tema1;\r\n        return tem.tema1 !== 0; \r\n    });\r\n\r\n    console.log('______filtro aprobacion_______')\r\n    console.log(temaTotal/temaTotal.length)\r\n    console.log('______Tema 1_______ '+sumaTema1)\r\n\r\n\r\n    //console.log('_____________ lista')\r\n    //console.log(newListaParciales)\r\n    //console.log('_____________')\r\n\r\n }\r\n\r\n\r\n    var sduper = [\r\n        { nm: 1, numeroControl: \"20E20004\", nombre: \"SARAHI MARLENE MALDONADO JUAREZ\", modalidad: \"\" },\r\n        { nm: 2, numeroControl: \"20E20002\", nombre: \"ERICK MOISES HERRERA  DE LA CRUZ\", modalidad: \"\" },\r\n        { nm: 3, numeroControl: \"20E20011\", nombre: \"JORGE ARCOS VAZQUEZ\", modalidad: \"\" },\r\n        { nm: 4, numeroControl: \"20E20006\", nombre: \"RODRIGO MORALES PEREZ\", modalidad: \"\" },\r\n        { nm: 5, numeroControl: \"20E20010\", nombre: \"CRISTOPHER LUIS LÓPEZ ARRAIZ\", modalidad: \"\" }];\r\n\r\n\r\n    const pdf = (nomMateria, docente_actual) => {\r\n        const Horas_clases = dataReportHorario[0].semanas;\r\n        const Grupo = dataReportHorario[0].grupo;\r\n        const Semestre = dataReportHorario[0].semestre;\r\n\r\n        var img = new Image();\r\n        img.src = Itsr;\r\n\r\n        const pdf = new jsPDF('p', 'pt', 'letter')\r\n        //body\r\n\r\n        var columns = [\r\n            { title: \"Nº\", dataKey: \"nm\" },\r\n            { title: \"CONTROL\", dataKey: \"numeroControl\" },\r\n            { title: \"ESTUDIANTES\", dataKey: \"nombreAspirante\", },\r\n            { title: \"O1\", dataKey: \"tema1\" },\r\n            { title: \"02\", dataKey: \"tema2\" },\r\n            { title: \"03\", dataKey: \"tema3\" },\r\n            { title: \"04\", dataKey: \"tema4\" },\r\n            { title: \"05\", dataKey: \"tema5\" },\r\n            { title: \"06\", dataKey: \"tema6\" },\r\n            { title: \"07\", dataKey: \"tema7\" },\r\n            { title: \"08\", dataKey: \"tema8\" },\r\n            { title: \"09\", dataKey: \"tema9\" },\r\n            { title: \"10\", dataKey: \"tema10\" },\r\n            { title: \"CAL\", dataKey: \"Total\" },\r\n            { title: \"TC\", dataKey: \"modalidad\" }\r\n        ];\r\n\r\n        pdf.autoTable(columns, newListaParciales,\r\n            {\r\n                margin: { top: 75 },\r\n                styles: { halign: 'center', cellPadding: 0.5, fontSize: 7 },\r\n                theme: 'grid',\r\n\r\n            }\r\n        );\r\n\r\n\r\n        //piede paginas\r\n        const pageCount = pdf.internal.getNumberOfPages();\r\n        for (var i = 1; i <= pageCount; i++) {\r\n            pdf.setPage(i);\r\n\r\n\r\n            pdf.setFontSize(14)//encabezado\r\n            pdf.text(130, 15, 'INSTITUTO TECNOLÓGICO SUPERIOR DE LOS RÍOS')\r\n            pdf.line(100, 17, 500, 17) // horizontal line\r\n            pdf.setFontSize(8)\r\n            pdf.text(262, 26, \"PRELISTA CON PARCIALES\");\r\n            pdf.roundedRect(102, 45, 400, 12, 3, 3)\r\n            pdf.setFontSize(8)\r\n            pdf.text(100, 40, `MATERIA: ${nomMateria}`);\r\n            pdf.setFontSize(8)\r\n            pdf.text(500, 31, `PERIODO: ${dataPeriodo[0].rango}`);\r\n            pdf.setFontSize(8)\r\n            pdf.text(500, 40, `FECHA: ${moment().format('L')}`);\r\n            pdf.setFontSize(7)\r\n            pdf.text(122, 54, Horas_clases);\r\n            pdf.setFontSize(8)\r\n            pdf.text(500, 66, `GRUPO: ${Semestre} ${Grupo}`);\r\n            pdf.setFontSize(8)\r\n            pdf.text(100, 66, `DOCENTE: ${docente_actual}`);\r\n            pdf.addImage(img, 'PNG', 13, 10, 63, 63)\r\n\r\n\r\n            pdf.setFontSize(7)//pie de pagina\r\n            pdf.text(20, 760, \"C (Curso, R:Repetición, E:Especial)\");\r\n            pdf.setLineWidth(1.6)\r\n            pdf.line(390, 760, 500, 760)\r\n            pdf.setFontSize(7)\r\n            pdf.text(413, 767, \"FIRMA DOCENTE\");\r\n            pdf.text(20, 770, 'Pagina' + String(i) + ' de ' + String(pageCount), null, null, null, null, \"right\");\r\n        }\r\n        pdf.save(`PARCIALES ${nomMateria}.pdf`);\r\n\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Buttons texto=\"Calificaciones Parciales\" onGenerar={infPdf} color=\"primary\" />\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}