{"ast":null,"code":"var _jsxFileName = \"E:\\\\Certificados\\\\itsrdocentes\\\\itsrdocentes\\\\src\\\\componentes\\\\contenedores\\\\docente_calificaciones\\\\tabla_calificaciones.jsx\";\nimport React, { useEffect, useRef, useCallback } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport SaveIcon from '@material-ui/icons/Save';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport moment from 'moment';\nimport swal from 'sweetalert';\nimport './calificaciones.css';\nimport { useStyles } from './dialogos_calificacion';\nimport { dataPeriodo, getAlumnos, getAdmiFechas } from '../../servicios/api';\nimport { datalistaAlumnos, getCriterios, dataCriterios } from '../../servicios/api';\nimport { crearCalificacion, updateCalificaion, dataFechasCierre } from '../../servicios/api';\nimport { SelecMaterias } from './select_materia';\nimport { SelectTemas } from './select_temas';\nimport { ChipCriterios } from './chip_criterios';\nimport { TablaCapturaCalificaciones } from './Tabla_registro';\nimport { EnviarCriterios } from './cont_criterios';\nexport var unidad_Tema;\nvar ccx1 = 0,\n    ccx2 = 0,\n    ccx3 = 0,\n    ccx4 = 0,\n    unidadCalificacion,\n    id_criterios;\nvar crt1 = 'criterio_1',\n    crt2 = 'criterio_2',\n    crt3 = 'criterio_3',\n    crt4 = 'criterio_4';\nconst funtions = new Set();\nexport const MaterialTableDemo = () => {\n  //inicio del componente\n  const estilos = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [calificaciones, setcalificaciones] = React.useState({\n    datalistaAlumnos\n  });\n  const [listasTemas, setListas] = React.useState([]);\n  const [MATERIA_ID, setMATERIA_ID] = React.useState([]);\n  const [unidad, setUnidad] = React.useState('');\n  const [cierre, setCierre] = React.useState(false);\n  const [minimo, setMinimo] = React.useState(false);\n  const [c1, setC1] = React.useState('');\n  const [c2, setC2] = React.useState('');\n  const [c3, setC3] = React.useState('');\n  const [c4, setC4] = React.useState('');\n  const BC1 = useRef();\n  const BC2 = useRef();\n  const BC3 = useRef();\n  const BC4 = useRef(); //moment(new Date('2020-03-31')).format('YYYY-MM-DD'); fecha para las pruebas de cierre de acta\n  //let get_materia_id; \n\n  const fecha_actual = moment(new Date()).format('YYYY-MM-DD'); // aca esta la fecha en tiempo real\n\n  useEffect(() => {\n    setcalificaciones({\n      datalistaAlumnos: []\n    });\n    BC1.current.style.display = 'none';\n    BC2.current.style.display = 'none';\n    BC3.current.style.display = 'none';\n    BC4.current.style.display = 'none'; // document.getElementById('porcentajeC1').disabled = true;\n\n    async function fechasGet() {\n      //establese el cieere de acta de acuerdo la fecha actual\n      try {\n        if (dataFechasCierre.length === 0) {\n          console.log('iniciando la peticon de fechas');\n          await getAdmiFechas();\n        }\n\n        var primera = moment(dataFechasCierre[0].primera_entrega).format('YYYY-MM-DD');\n        var segunda = moment(dataFechasCierre[0].segunda_entrega).format('YYYY-MM-DD');\n        var tercera = moment(dataFechasCierre[0].tercera_entrega).format('YYYY-MM-DD');\n\n        if (fecha_actual <= primera) {\n          let rest = moment(fecha_actual).subtract(2, 'month');\n          setCierre(primera);\n          setMinimo(moment(rest).format('YYYY-MM-DD'));\n        } else if (fecha_actual <= segunda) {\n          setCierre(segunda);\n          setMinimo(primera);\n        } else if (fecha_actual <= tercera) {\n          setCierre(tercera);\n          setMinimo(segunda);\n        } else {\n          console.log(\"Sin fechas de cierre definidas por el momento \");\n        }\n      } catch (error) {//pendiente\n      }\n    }\n\n    fechasGet();\n  }, []);\n  const updates = useCallback(async (m, u) => {\n    //actualiza los griterios despues de incertar en la db m:materia u:unidad\n    console.log('hook update');\n    await getCriterios(m, u); // LISTA DE CRITERIO getTem\n\n    await Promise.all([ccx1 = dataCriterios[0].porcentageC1, ccx2 = dataCriterios[0].porcentageC2, ccx3 = dataCriterios[0].porcentageC3, ccx4 = dataCriterios[0].porcentageC4, crt1 = dataCriterios[0].criterio1, crt2 = dataCriterios[0].criterio2, crt3 = dataCriterios[0].criterio3, crt4 = dataCriterios[0].criterio4]);\n    setC1(crt1);\n    setC2(crt2);\n    setC3(crt3);\n    setC4(crt4);\n    BC1.current.value = ccx1;\n    BC2.current.value = ccx2;\n    BC3.current.value = ccx3;\n    BC4.current.value = ccx4;\n    BC1.current.style.display = 'block';\n    BC2.current.style.display = 'block';\n    BC3.current.style.display = 'block';\n    BC4.current.style.display = 'block';\n    console.log('finnn-......');\n    return true;\n  }, [MATERIA_ID]);\n  const obtenerTema = useCallback(async tem => {\n    //inico\n    console.log('hook obtenerTema');\n    setOpen(true);\n    let numTemas = tem.target.value;\n    setUnidad(numTemas);\n    await getAlumnos(MATERIA_ID, numTemas); //LISTA DE ALUMNOS  Pendiene mandar unidad que es el tema #\n\n    await setcalificaciones({\n      datalistaAlumnos: datalistaAlumnos\n    });\n    await updates(MATERIA_ID, numTemas);\n    console.log(dataCriterios);\n    setOpen(false);\n    unidadCalificacion = dataCriterios[0].numUnidad; //public unidad del criterio seleccinado\n\n    id_criterios = dataCriterios[0].idcat_Unidad; //public id_criterios del criterio seleccinado\n  }, [MATERIA_ID]); //fin\n\n  const guardarPromedio = useCallback(async datos => {\n    //inicio  enviar el promedio asignado en la tabla captura_calificacion\n    console.log('hook guardarPromedio ' + datos.idMateria);\n    console.log(datos);\n    let bandera = datos.materiaDocente_id;\n    let idcalificacion = datos.idcalificaciones;\n\n    if (bandera) {\n      if (datos.calR2 === null && datos.calR3 === null && datos.calR4 === null) {\n        datos.calR2 = 0;\n        datos.calR3 = 0;\n        datos.calR4 = 0;\n      } else if (datos.calR3 === null && datos.calR4 === null) {\n        datos.calR3 = 0;\n        datos.calR4 = 0;\n      } else if (datos.calR4 === null) {\n        datos.calR4 = 0;\n      }\n\n      await updateCalificaion(idcalificacion, datos);\n    } else {\n      //crear registro para el alumno en registro calificacion\n      await crearCalificacion(datos, unidadCalificacion, id_criterios);\n      await getAlumnos(datos.idMateria, unidadCalificacion); //LISTA DE ALUMNOS\n\n      await setcalificaciones({\n        datalistaAlumnos: datalistaAlumnos\n      });\n    }\n  }, []); //fin\n\n  const guardarPorcentaje_c1 = useCallback(async () => {\n    //inicio\n    console.log('hook porcentaje 1');\n    var input = document.getElementById('porcentajeC1');\n    input.addEventListener('input', function () {\n      if (this.value.length > 2) this.value = this.value.slice(0, 2);\n    });\n\n    if (input.value <= 100) {\n      if (input.value.length === 2) {\n        swal(\"Describa el nombre del creterio:\", {\n          content: \"input\",\n          closeOnClickOutside: false\n        }).then(comentario => {\n          if (comentario) {\n            //enviar porcentage y comentario   \n            EnviarCriterios(1, input.value, comentario, updates).then(res => {\n              console.log(res);\n            });\n          } else {\n            alert(\"No puede estar vacio\");\n          }\n        });\n      }\n    } else {\n      alert(\"no puede exeder de 100 %\");\n    }\n  }, []); //fin\n\n  const guardarPorcentaje_c2 = useCallback(e => {\n    //inicio\n    console.log('hook porcentaje 2');\n    var input2 = document.getElementById('porcentajeC2'); //inicio 1\n\n    input2.addEventListener('input', function () {\n      if (this.value.length > 2) this.value = this.value.slice(0, 2);\n    });\n\n    if (input2.value <= 100) {\n      if (input2.value.length === 2) {\n        //ejecutar metodo de guardar\n        swal(\"describa el nombre del creterio:\", {\n          content: \"input\",\n          closeOnClickOutside: false\n        }).then(comentario => {\n          if (comentario) {\n            EnviarCriterios(2, input2.value, comentario, updates).then(res => {\n              console.log(res);\n            });\n          } else {\n            console.log(\"No puede estar vacio\");\n          }\n        });\n      }\n    } else {\n      alert(\"No puede exeder de 100 %\");\n    }\n  }, []); //fin\n\n  const guardarPorcentaje_c3 = useCallback(e => {\n    //inicio\n    console.log('hook porcentaje 3');\n    var input3 = document.getElementById('porcentajeC3'); //inicio 1\n\n    input3.addEventListener('input', function () {\n      if (this.value.length > 2) this.value = this.value.slice(0, 2);\n    });\n\n    if (input3.value <= 100) {\n      if (input3.value.length === 2) {\n        swal(\"describa el nombre del creterio:\", {\n          content: \"input\",\n          closeOnClickOutside: false\n        }).then(comentario => {\n          if (comentario) {\n            EnviarCriterios(3, input3.value, comentario, updates).then(res => {\n              console.log(res);\n            });\n          } else {\n            alert(\"No puede estar vacio \");\n          }\n        });\n      }\n    } else {\n      alert(\"No puede exeder de 100 %\");\n    }\n  }, []); //fin\n\n  const guardarPorcentaje_c4 = useCallback(e => {\n    //inicio\n    console.log('hook porcentaje 4');\n    var input4 = document.getElementById('porcentajeC4'); //inicio 1\n\n    input4.addEventListener('input', function () {\n      if (this.value.length > 2) this.value = this.value.slice(0, 2);\n    });\n\n    if (input4.value <= 100) {\n      if (input4.value.length === 2) {\n        swal(\"Describa el nombre del creterio:\", {\n          content: \"input\",\n          closeOnClickOutside: false\n        }).then(comentario => {\n          if (comentario) {\n            //enviarCriteriosc4(input4.value, comentario)\n            EnviarCriterios(4, input4.value, comentario, updates).then(res => {\n              console.log(res);\n            });\n          } else {\n            alert(\"No puede estar vacio \");\n          }\n        });\n      }\n    } else {\n      alert(\"No puede exeder de 100 %\");\n    }\n  }, []); //fin\n\n  funtions.add(updates);\n  funtions.add(obtenerTema);\n  funtions.add(guardarPromedio);\n  funtions.add(guardarPorcentaje_c1);\n  funtions.add(guardarPorcentaje_c2);\n  funtions.add(guardarPorcentaje_c3);\n  funtions.add(guardarPorcentaje_c4);\n  console.log(funtions);\n  const [alumnos, setAlumnos] = React.useState({\n    // datos de la tabla calificacion\n    columns: [{\n      title: 'NÂª',\n      field: 'nm',\n      editable: 'never',\n      defaultSort: 'asc'\n    }, {\n      title: 'Control',\n      field: 'control',\n      editable: 'never',\n      disablePadding: true,\n      minWidth: 10,\n      defaultSort: null,\n      cellStyle: {\n        width: \"100\",\n        textAlign: \"left\",\n        paddingTop: 2,\n        paddingBottom: 0\n      }\n    }, {\n      title: 'Nombre',\n      field: 'nameAlumno',\n      editable: 'never',\n      disablePadding: true\n    }, {\n      title: 'Curso',\n      field: 'curso',\n      editable: 'never',\n      disablePadding: true,\n      minWidth: 10\n    }, {\n      title: 'Opcion',\n      field: 'opcion',\n      editable: 'never',\n      disablePadding: true,\n      minWidth: 10\n    }, {\n      title: 'C1',\n      field: 'calR1',\n      disablePadding: true,\n      minWidth: 10\n    }, {\n      title: 'C2',\n      field: 'calR2',\n      disablePadding: true,\n      minWidth: 10\n    }, {\n      title: 'C3',\n      field: 'calR3',\n      disablePadding: true,\n      minWidth: 10\n    }, {\n      title: 'C4',\n      field: 'calR4',\n      disablePadding: true,\n      minWidth: 10\n    }, {\n      title: '#',\n      field: '#',\n      editable: 'never',\n      size: 'small',\n      disablePadding: true\n    }, {\n      title: React.createElement(\"input\", {\n        className: \"inputTemas\",\n        id: \"porcentajeC1\",\n        placeholder: \"C1\",\n        style: {\n          width: '4ch'\n        },\n        ref: BC1,\n        onChange: guardarPorcentaje_c1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }),\n      field: 'calCriterio1',\n      editable: 'never',\n      minWidth: 10,\n      disablePadding: true\n    }, {\n      title: React.createElement(\"input\", {\n        className: \"inputTemas\",\n        id: \"porcentajeC2\",\n        placeholder: \"C2\",\n        style: {\n          width: '4ch'\n        },\n        ref: BC2,\n        onChange: guardarPorcentaje_c2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }),\n      field: 'calCriterio2',\n      editable: 'never',\n      minWidth: 10,\n      disablePadding: true\n    }, {\n      title: React.createElement(\"input\", {\n        className: \"inputTemas\",\n        id: \"porcentajeC3\",\n        placeholder: \"C3\",\n        style: {\n          width: '4ch'\n        },\n        ref: BC3,\n        onChange: guardarPorcentaje_c3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }),\n      field: 'calCriterio3',\n      editable: 'never',\n      disablePadding: true\n    }, {\n      title: React.createElement(\"input\", {\n        className: \"inputTemas\",\n        id: \"porcentajeC4\",\n        placeholder: \"C4\",\n        style: {\n          width: '4ch'\n        },\n        ref: BC4,\n        onChange: guardarPorcentaje_c4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }),\n      field: 'calCriterio4',\n      editable: 'never',\n      disablePadding: true\n    }, {\n      title: 'Total',\n      field: 'calificaciontotal',\n      editable: 'never',\n      disablePadding: true\n    }]\n  }); //\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335\n    },\n    __self: this\n  }, React.createElement(Backdrop, {\n    className: estilos.backdrop,\n    open: open,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336\n    },\n    __self: this\n  }, React.createElement(CircularProgress, {\n    color: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341\n    },\n    __self: this\n  }, \"INSTITUTO TECNOLOGICO SUPERIOR DE LOS RIOS\")), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 0,\n    className: estilos.paperperiodos,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344\n    },\n    __self: this\n  }, \"PERIODO: \", dataPeriodo[0].rango)), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 0,\n    className: estilos.paperperiodos,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347\n    },\n    __self: this\n  }, \"CIERRE DE ACTA: \", cierre)), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    className: estilos.paperAvatar,\n    elevation: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350\n    },\n    __self: this\n  }, React.createElement(ChipCriterios, {\n    ccx1: ccx1,\n    ccx2: ccx2,\n    ccx3: ccx3,\n    ccx4: ccx4,\n    c1: c1,\n    c2: c2,\n    c3: c3,\n    c4: c4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351\n    },\n    __self: this\n  }))), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 0,\n    className: estilos.papermaterias,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357\n    },\n    __self: this\n  }, React.createElement(SelecMaterias, {\n    setListas: setListas,\n    setcalificaciones: setcalificaciones,\n    setMATERIA_ID: setMATERIA_ID,\n    minimo: minimo,\n    cierre: cierre,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358\n    },\n    __self: this\n  }))), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 0,\n    className: estilos.papermaterias,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363\n    },\n    __self: this\n  }, React.createElement(SelectTemas, {\n    unidad: unidad,\n    lisTemas: obtenerTema,\n    listasTemas: listasTemas,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364\n    },\n    __self: this\n  }))), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367\n    },\n    __self: this\n  }), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370\n    },\n    __self: this\n  }, React.createElement(TablaCapturaCalificaciones, {\n    alumnos: alumnos,\n    calificaciones: calificaciones,\n    setcalificaciones: setcalificaciones,\n    ccx1: ccx1,\n    ccx2: ccx2,\n    ccx3: ccx3,\n    ccx4: ccx4,\n    guardarPromedio: guardarPromedio,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371\n    },\n    __self: this\n  }))), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378\n    },\n    __self: this\n  }, \"*O: Ordinario   *1:Primera oportunidad   *NA: No Alcanza\"), React.createElement(Paper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379\n    },\n    __self: this\n  }, \"*R: Repeticion   *2:Segunda oportunidad\"), React.createElement(Paper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380\n    },\n    __self: this\n  }, \"*E: Especial\")), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"small\",\n    startIcon: React.createElement(SaveIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383\n    },\n    __self: this\n  }, \"Descargar Reporte de Calificaciones\"))));\n};\nexport default MaterialTableDemo;","map":{"version":3,"sources":["E:/Certificados/itsrdocentes/itsrdocentes/src/componentes/contenedores/docente_calificaciones/tabla_calificaciones.jsx"],"names":["React","useEffect","useRef","useCallback","Button","Grid","Paper","SaveIcon","Backdrop","CircularProgress","moment","swal","useStyles","dataPeriodo","getAlumnos","getAdmiFechas","datalistaAlumnos","getCriterios","dataCriterios","crearCalificacion","updateCalificaion","dataFechasCierre","SelecMaterias","SelectTemas","ChipCriterios","TablaCapturaCalificaciones","EnviarCriterios","unidad_Tema","ccx1","ccx2","ccx3","ccx4","unidadCalificacion","id_criterios","crt1","crt2","crt3","crt4","funtions","Set","MaterialTableDemo","estilos","open","setOpen","useState","calificaciones","setcalificaciones","listasTemas","setListas","MATERIA_ID","setMATERIA_ID","unidad","setUnidad","cierre","setCierre","minimo","setMinimo","c1","setC1","c2","setC2","c3","setC3","c4","setC4","BC1","BC2","BC3","BC4","fecha_actual","Date","format","current","style","display","fechasGet","length","console","log","primera","primera_entrega","segunda","segunda_entrega","tercera","tercera_entrega","rest","subtract","error","updates","m","u","Promise","all","porcentageC1","porcentageC2","porcentageC3","porcentageC4","criterio1","criterio2","criterio3","criterio4","value","obtenerTema","tem","numTemas","target","numUnidad","idcat_Unidad","guardarPromedio","datos","idMateria","bandera","materiaDocente_id","idcalificacion","idcalificaciones","calR2","calR3","calR4","guardarPorcentaje_c1","input","document","getElementById","addEventListener","slice","content","closeOnClickOutside","then","comentario","res","alert","guardarPorcentaje_c2","e","input2","guardarPorcentaje_c3","input3","guardarPorcentaje_c4","input4","add","alumnos","setAlumnos","columns","title","field","editable","defaultSort","disablePadding","minWidth","cellStyle","width","textAlign","paddingTop","paddingBottom","size","backdrop","paperperiodos","rango","paperAvatar","papermaterias"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useCallback } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport moment from 'moment';\r\nimport swal from 'sweetalert';\r\nimport './calificaciones.css';\r\nimport { useStyles } from './dialogos_calificacion';\r\nimport {  dataPeriodo, getAlumnos, getAdmiFechas } from '../../servicios/api';\r\nimport { datalistaAlumnos, getCriterios, dataCriterios,  } from '../../servicios/api';\r\nimport { crearCalificacion, updateCalificaion, dataFechasCierre } from '../../servicios/api';\r\nimport {SelecMaterias} from './select_materia';\r\nimport { SelectTemas} from './select_temas';\r\nimport {ChipCriterios} from './chip_criterios';\r\nimport { TablaCapturaCalificaciones} from './Tabla_registro';\r\nimport {EnviarCriterios} from './cont_criterios';\r\nexport var unidad_Tema;\r\n\r\nvar ccx1 = 0, ccx2 = 0, ccx3 = 0, ccx4 = 0, unidadCalificacion, id_criterios;\r\nvar crt1 = 'criterio_1', crt2 = 'criterio_2', crt3 = 'criterio_3', crt4 = 'criterio_4';\r\n\r\n\r\n\r\n\r\nconst funtions = new Set();\r\n\r\n\r\nexport const MaterialTableDemo = () => {//inicio del componente\r\n\r\n  const estilos = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [calificaciones, setcalificaciones] = React.useState({ datalistaAlumnos });\r\n  const [listasTemas, setListas] = React.useState([]);\r\n  const [MATERIA_ID, setMATERIA_ID] = React.useState([]);\r\n  const [unidad, setUnidad] = React.useState('');\r\n  const [cierre, setCierre] = React.useState(false);\r\n  const [minimo, setMinimo] = React.useState(false);\r\n\r\n  const [c1, setC1] = React.useState('');\r\n  const [c2, setC2] = React.useState('');\r\n  const [c3, setC3] = React.useState('');\r\n  const [c4, setC4] = React.useState('');\r\n\r\n\r\n  const BC1 = useRef();\r\n  const BC2 = useRef();\r\n  const BC3 = useRef();\r\n  const BC4 = useRef();\r\n                         //moment(new Date('2020-03-31')).format('YYYY-MM-DD'); fecha para las pruebas de cierre de acta\r\n  //let get_materia_id; \r\n  const fecha_actual =  moment(new Date()).format('YYYY-MM-DD'); // aca esta la fecha en tiempo real\r\n\r\n\r\n  useEffect(() => {\r\n    \r\n    setcalificaciones({datalistaAlumnos:[]})\r\n    BC1.current.style.display = 'none'\r\n    BC2.current.style.display = 'none'\r\n    BC3.current.style.display = 'none'\r\n    BC4.current.style.display = 'none'\r\n\r\n    // document.getElementById('porcentajeC1').disabled = true;\r\n    async function fechasGet() {//establese el cieere de acta de acuerdo la fecha actual\r\n      try {\r\n        if(dataFechasCierre.length === 0){\r\n          console.log('iniciando la peticon de fechas')\r\n          await getAdmiFechas()\r\n        }\r\n        \r\n        var primera = moment(dataFechasCierre[0].primera_entrega).format('YYYY-MM-DD');\r\n        var segunda = moment(dataFechasCierre[0].segunda_entrega).format('YYYY-MM-DD');\r\n        var tercera = moment(dataFechasCierre[0].tercera_entrega).format('YYYY-MM-DD');\r\n\r\n        if (fecha_actual <= primera) {\r\n          let rest = moment(fecha_actual).subtract(2, 'month');\r\n          setCierre(primera)\r\n          setMinimo(moment(rest).format('YYYY-MM-DD'))\r\n        } else if (fecha_actual <= segunda) {\r\n          setCierre(segunda)\r\n          setMinimo(primera)\r\n        } else if (fecha_actual <= tercera) {\r\n          setCierre(tercera)\r\n          setMinimo(segunda)\r\n        } else {\r\n          console.log(\"Sin fechas de cierre definidas por el momento \")\r\n        }\r\n      } catch (error) {\r\n        //pendiente\r\n      }\r\n    }\r\n\r\n\r\n    fechasGet()\r\n\r\n  }, [])\r\n   \r\n  \r\n  const updates = useCallback( async (m,u)  => {//actualiza los griterios despues de incertar en la db m:materia u:unidad\r\n    console.log('hook update')\r\n    await getCriterios(m,u);// LISTA DE CRITERIO getTem\r\n    await Promise.all([\r\n      ccx1 = dataCriterios[0].porcentageC1,\r\n      ccx2 = dataCriterios[0].porcentageC2,\r\n      ccx3 = dataCriterios[0].porcentageC3,\r\n      ccx4 = dataCriterios[0].porcentageC4,\r\n      crt1 = dataCriterios[0].criterio1,\r\n      crt2 = dataCriterios[0].criterio2,\r\n      crt3 = dataCriterios[0].criterio3,\r\n      crt4 = dataCriterios[0].criterio4]);\r\n      setC1(crt1)\r\n      setC2(crt2)\r\n      setC3(crt3)\r\n      setC4(crt4)\r\n\r\n    BC1.current.value = ccx1\r\n    BC2.current.value = ccx2\r\n    BC3.current.value = ccx3\r\n    BC4.current.value = ccx4\r\n\r\n    BC1.current.style.display = 'block'\r\n    BC2.current.style.display = 'block'\r\n    BC3.current.style.display = 'block'\r\n    BC4.current.style.display = 'block'\r\n   console.log('finnn-......')\r\n   return true\r\n  },[MATERIA_ID])\r\n\r\n  \r\n  const obtenerTema = useCallback( async (tem) => {//inico\r\n    console.log('hook obtenerTema')\r\n\r\n    setOpen(true)\r\n    let numTemas = tem.target.value;\r\n    setUnidad(numTemas);\r\n    await getAlumnos(MATERIA_ID, numTemas);//LISTA DE ALUMNOS  Pendiene mandar unidad que es el tema #\r\n    await setcalificaciones({ datalistaAlumnos: datalistaAlumnos });\r\n   \r\n    await updates(MATERIA_ID,numTemas)\r\n    console.log(dataCriterios)\r\n    setOpen(false)\r\n\r\n    unidadCalificacion = dataCriterios[0].numUnidad;//public unidad del criterio seleccinado\r\n    id_criterios = dataCriterios[0].idcat_Unidad;//public id_criterios del criterio seleccinado\r\n  },[MATERIA_ID])//fin\r\n\r\n  const guardarPromedio = useCallback(async (datos) => {//inicio  enviar el promedio asignado en la tabla captura_calificacion\r\n    console.log('hook guardarPromedio '+ datos.idMateria )\r\n    console.log(datos )\r\n\r\n    \r\n    let bandera = datos.materiaDocente_id;\r\n    let idcalificacion = datos.idcalificaciones;\r\n\r\n    if (bandera) {\r\n      if (datos.calR2 === null && datos.calR3 === null && datos.calR4 === null) {\r\n        datos.calR2 = 0;\r\n        datos.calR3 = 0;\r\n        datos.calR4 = 0;\r\n      } else if (datos.calR3 === null && datos.calR4 === null) {\r\n        datos.calR3 = 0;\r\n        datos.calR4 = 0;\r\n      } else if (datos.calR4 === null) {\r\n        datos.calR4 = 0;\r\n      }\r\n      await updateCalificaion(idcalificacion, datos)\r\n    } else {//crear registro para el alumno en registro calificacion\r\n      await crearCalificacion(datos, unidadCalificacion, id_criterios);\r\n      await getAlumnos(datos.idMateria, unidadCalificacion);//LISTA DE ALUMNOS\r\n      await setcalificaciones({ datalistaAlumnos: datalistaAlumnos });\r\n    }\r\n  },[])//fin\r\n\r\n\r\n  \r\n  const guardarPorcentaje_c1 = useCallback(async () => {//inicio\r\n    console.log('hook porcentaje 1')\r\n\r\n    var input = document.getElementById('porcentajeC1');\r\n    input.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n    if (input.value <= 100) {\r\n      if (input.value.length === 2) {\r\n        swal(\"Describa el nombre del creterio:\", {\r\n          content: \"input\",\r\n          closeOnClickOutside: false,\r\n        })\r\n          .then((comentario) => {\r\n            if (comentario) {\r\n              //enviar porcentage y comentario   \r\n             EnviarCriterios( 1 ,input.value, comentario, updates).then(res =>{console.log(res)})\r\n            } else {\r\n              alert(\"No puede estar vacio\")\r\n            }\r\n          });\r\n      }\r\n    } else {\r\n      alert(\"no puede exeder de 100 %\")\r\n    }\r\n  },[])//fin\r\n\r\n  \r\n  const guardarPorcentaje_c2 =useCallback( (e) => {//inicio\r\n    console.log('hook porcentaje 2')\r\n\r\n    var input2 = document.getElementById('porcentajeC2');//inicio 1\r\n    input2.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n    if (input2.value <= 100) {\r\n      if (input2.value.length === 2) {\r\n        //ejecutar metodo de guardar\r\n        swal(\"describa el nombre del creterio:\", {\r\n          content: \"input\",\r\n          closeOnClickOutside: false,\r\n        })\r\n          .then((comentario) => {\r\n            if (comentario) {\r\n             EnviarCriterios( 2 ,input2.value, comentario, updates).then(res =>{console.log(res)})\r\n            } else {\r\n              console.log(\"No puede estar vacio\")\r\n            }\r\n          });\r\n      }\r\n    } else {\r\n      alert(\"No puede exeder de 100 %\")\r\n    }\r\n  },[])//fin\r\n\r\n\r\n \r\n  const guardarPorcentaje_c3 =useCallback( (e) => {//inicio\r\n    console.log('hook porcentaje 3')\r\n\r\n    var input3 = document.getElementById('porcentajeC3');//inicio 1\r\n    input3.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n    if (input3.value <= 100) {\r\n      if (input3.value.length === 2) {\r\n        swal(\"describa el nombre del creterio:\", {\r\n          content: \"input\",\r\n          closeOnClickOutside: false,\r\n        })\r\n          .then((comentario) => {\r\n            if (comentario) {\r\n            EnviarCriterios( 3 ,input3.value, comentario, updates).then(res =>{console.log(res)})\r\n            \r\n          } else {\r\n              alert(\"No puede estar vacio \")\r\n            }\r\n          });\r\n      }\r\n    } else {\r\n      alert(\"No puede exeder de 100 %\")\r\n    }\r\n  },[])//fin\r\n\r\n \r\n  const guardarPorcentaje_c4 = useCallback( (e) => {//inicio\r\n    console.log('hook porcentaje 4')\r\n\r\n   var input4 = document.getElementById('porcentajeC4');//inicio 1\r\n    input4.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n    if (input4.value <= 100) {\r\n      if (input4.value.length === 2) {\r\n        swal(\"Describa el nombre del creterio:\", {\r\n          content: \"input\",\r\n          closeOnClickOutside: false,\r\n        })\r\n          .then((comentario) => {\r\n            if (comentario) {\r\n              //enviarCriteriosc4(input4.value, comentario)\r\n             EnviarCriterios( 4 ,input4.value, comentario, updates).then(res =>{console.log(res)})\r\n\r\n            } else {\r\n              alert(\"No puede estar vacio \")\r\n            }\r\n          });\r\n      }\r\n    } else {\r\n      alert(\"No puede exeder de 100 %\")\r\n    }\r\n  },[])//fin\r\n\r\n  funtions.add(updates)\r\n  funtions.add(obtenerTema)\r\n  funtions.add(guardarPromedio)\r\n  funtions.add(guardarPorcentaje_c1)\r\n  funtions.add(guardarPorcentaje_c2)\r\n  funtions.add(guardarPorcentaje_c3)\r\n  funtions.add(guardarPorcentaje_c4)\r\n  console.log(funtions)\r\n\r\n\r\n\r\n\r\n\r\n\r\n  const [alumnos, setAlumnos] = React.useState({// datos de la tabla calificacion\r\n    columns: [\r\n      { title: 'NÂª', field: 'nm', editable: 'never', defaultSort:'asc' },\r\n      { title: 'Control', field: 'control', editable: 'never', disablePadding: true, minWidth: 10,defaultSort:null ,\r\n      cellStyle: { width: \"100\", textAlign: \"left\",  paddingTop: 2, paddingBottom: 0 }\r\n    \r\n    },\r\n      { title: 'Nombre', field: 'nameAlumno', editable: 'never', disablePadding: true },\r\n      { title: 'Curso', field: 'curso', editable: 'never', disablePadding: true, minWidth: 10 },\r\n      { title: 'Opcion', field: 'opcion', editable: 'never', disablePadding: true, minWidth: 10 },\r\n      { title: 'C1', field: 'calR1', disablePadding: true, minWidth: 10 },\r\n      { title: 'C2', field: 'calR2', disablePadding: true, minWidth: 10 },\r\n      { title: 'C3', field: 'calR3', disablePadding: true, minWidth: 10 },\r\n      { title: 'C4', field: 'calR4', disablePadding: true, minWidth: 10 },\r\n      { title: '#', field: '#', editable: 'never', size: 'small', disablePadding: true },\r\n      { title: <input className=\"inputTemas\" id=\"porcentajeC1\" placeholder=\"C1\" style={{ width: '4ch' }} ref={BC1} onChange={guardarPorcentaje_c1} ></input>, field: 'calCriterio1', editable: 'never', minWidth: 10, disablePadding: true },\r\n      { title: <input className=\"inputTemas\" id=\"porcentajeC2\" placeholder=\"C2\" style={{ width: '4ch' }} ref={BC2} onChange={guardarPorcentaje_c2} ></input>, field: 'calCriterio2', editable: 'never', minWidth: 10, disablePadding: true },\r\n      { title: <input className=\"inputTemas\" id=\"porcentajeC3\" placeholder=\"C3\" style={{ width: '4ch' }} ref={BC3} onChange={guardarPorcentaje_c3}  ></input>, field: 'calCriterio3', editable: 'never', disablePadding: true },\r\n      { title: <input className=\"inputTemas\" id=\"porcentajeC4\" placeholder=\"C4\" style={{ width: '4ch' }} ref={BC4} onChange={guardarPorcentaje_c4}  ></input>, field: 'calCriterio4', editable: 'never', disablePadding: true },\r\n      { title: 'Total', field: 'calificaciontotal', editable: 'never', disablePadding: true }\r\n    ]\r\n  })\r\n\r\n  //\r\n\r\n  return (\r\n    <div>\r\n      <Backdrop className={estilos.backdrop} open={open} >\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12}>\r\n          <h3 >INSTITUTO TECNOLOGICO SUPERIOR DE LOS RIOS</h3>\r\n        </Grid>\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.paperperiodos}>PERIODO: {dataPeriodo[0].rango}</Paper>\r\n        </Grid>\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.paperperiodos}>CIERRE DE ACTA: {cierre }</Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <Paper className={estilos.paperAvatar} elevation={0} >\r\n          <ChipCriterios \r\n           ccx1={ccx1} ccx2={ccx2} ccx3={ccx3} ccx4={ccx4} \r\n           c1={c1} c2={c2} c3={c3} c4={c4} />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.papermaterias}>\r\n          <SelecMaterias setListas={setListas} setcalificaciones={setcalificaciones} \r\n           setMATERIA_ID={setMATERIA_ID} minimo={minimo} cierre={cierre} />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.papermaterias}>\r\n            <SelectTemas unidad={unidad} lisTemas={obtenerTema}  listasTemas={listasTemas}/>\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n        </Grid>\r\n        <Grid item xs={12} sm={12}>\r\n          <Paper elevation={3} >\r\n            <TablaCapturaCalificaciones  \r\n            alumnos={alumnos} calificaciones={calificaciones}  setcalificaciones={setcalificaciones} \r\n            ccx1={ccx1} ccx2={ccx2}  ccx3={ccx3} ccx4={ccx4}\r\n            guardarPromedio={guardarPromedio}/>\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <Paper >*O: Ordinario   *1:Primera oportunidad   *NA: No Alcanza</Paper>\r\n          <Paper >*R: Repeticion   *2:Segunda oportunidad</Paper>\r\n          <Paper >*E: Especial</Paper>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            startIcon={<SaveIcon />}>\r\n            Descargar Reporte de Calificaciones\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default MaterialTableDemo;"]},"metadata":{},"sourceType":"module"}