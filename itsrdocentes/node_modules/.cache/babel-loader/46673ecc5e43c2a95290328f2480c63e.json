{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\Certificados\\\\heroku\\\\pruevaparaproduccion\\\\DOCENTES\\\\itsrdocentes\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\Certificados\\\\heroku\\\\pruevaparaproduccion\\\\DOCENTES\\\\itsrdocentes\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\Certificados\\\\heroku\\\\pruevaparaproduccion\\\\DOCENTES\\\\itsrdocentes\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useCallback}from'react';import Button from'@material-ui/core/Button';import Grid from'@material-ui/core/Grid';import Paper from'@material-ui/core/Paper';import SaveIcon from'@material-ui/icons/Save';import Backdrop from'@material-ui/core/Backdrop';import CircularProgress from'@material-ui/core/CircularProgress';import moment from'moment';import swal from'sweetalert';import*as toastr from'toastr';import LinearProgress from'@material-ui/core/LinearProgress';import'./calificaciones.css';import{useStyles}from'./dialogos_calificacion';import{dataPeriodo,getAdmiFechas}from'../../servicios/api';import{datalistaAlumnos,getCriterios,dataCriterios}from'../../servicios/api';import{dataFechasCierre}from'../../servicios/api';import{SelecMaterias}from'./select_materia';import{SelectTemas}from'./select_temas';import{ChipCriterios}from'./chip_criterios';import{TablaCapturaCalificaciones}from'./Tabla_registro';import{EnviarCriterios}from'./cont_criterios';import{ReportParciales}from'./reportes/parciales/parciales';import{ActaFinal}from'./reportes/actaFinal/acta';export var unidad_Tema;//unidadCalificacion, id_criterios\nvar ccx1=0,ccx2=0,ccx3=0,ccx4=0;//var crt1 = 'Criterio 1', crt2 = 'Criterio 2', crt3 = 'Criterio 3', crt4 = 'Criterio 4';\nvar funtions=new Set();export var MaterialTableDemo=function MaterialTableDemo(){//inicio del componente\nvar estilos=useStyles();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState({datalistaAlumnos:datalistaAlumnos}),_React$useState4=_slicedToArray(_React$useState3,2),calificaciones=_React$useState4[0],setcalificaciones=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),listasTemas=_React$useState6[0],setListas=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),MATERIA_ID=_React$useState8[0],setMATERIA_ID=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),cierre=_React$useState10[0],setCierre=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),minimo=_React$useState12[0],setMinimo=_React$useState12[1];var _React$useState13=React.useState(0),_React$useState14=_slicedToArray(_React$useState13,2),ccx41=_React$useState14[0],setCcx4=_React$useState14[1];var _React$useState15=React.useState(0),_React$useState16=_slicedToArray(_React$useState15,2),ccx31=_React$useState16[0],setCcx3=_React$useState16[1];var _React$useState17=React.useState(0),_React$useState18=_slicedToArray(_React$useState17,2),ccx21=_React$useState18[0],setCcx2=_React$useState18[1];var _React$useState19=React.useState(0),_React$useState20=_slicedToArray(_React$useState19,2),ccx11=_React$useState20[0],setCcx1=_React$useState20[1];var BC1=useRef();var BC2=useRef();var BC3=useRef();var BC4=useRef();//moment(new Date('2020-03-31')).format('YYYY-MM-DD'); fecha para las pruebas de cierre de acta\n//let get_materia_id; \nvar fecha_actual=moment(new Date()).format('YYYY-MM-DD');// aca esta la fecha en tiempo real\nuseEffect(function(){setcalificaciones({datalistaAlumnos:[]});BC1.current.style.display='none';BC2.current.style.display='none';BC3.current.style.display='none';BC4.current.style.display='none';// document.getElementById('porcentajeC1').disabled = true;\nfunction fechasGet(){return _fechasGet.apply(this,arguments);}function _fechasGet(){_fechasGet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var primera,segunda,tercera,entrega_final,rest;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://establese el cieere de acta de acuerdo la fecha actual\nconsole.log(dataFechasCierre);_context.prev=1;if(!(dataFechasCierre.length===0)){_context.next=6;break;}console.log('iniciando la peticon de fechas');_context.next=6;return getAdmiFechas();case 6:primera=moment(dataFechasCierre[0].primera_entrega).format('YYYY-MM-DD');segunda=moment(dataFechasCierre[0].segunda_entrega).format('YYYY-MM-DD');//entrega_final\ntercera=moment(dataFechasCierre[0].tercera_entrega).format('YYYY-MM-DD');entrega_final=moment(dataFechasCierre[0].entrega_final).format('YYYY-MM-DD');if(fecha_actual<=primera){rest=moment(fecha_actual).subtract(2,'month');//rango de la fechas de busqueda\nsetCierre(primera);setMinimo(moment(rest).format('YYYY-MM-DD'));}else if(fecha_actual<=segunda){setCierre(segunda);setMinimo(primera);}else if(fecha_actual<=tercera){setCierre(tercera);setMinimo(segunda);}else if(fecha_actual<=entrega_final){setCierre(entrega_final);setMinimo(tercera);}else{alert(\"Sin fechas de cierre definidas por el momento \");}_context.next=15;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return _fechasGet.apply(this,arguments);}fechasGet();},[]);useEffect(function(){console.log('actualizando clen');ccx1=0;ccx2=0;ccx3=0;ccx4=0;setCcx4(0);setCcx3(0);setCcx2(0);setCcx1(0);BC1.current.value=0;BC2.current.value=0;BC3.current.value=0;BC4.current.value=0;/* \r\n    setC1('')\r\n    setC2('')\r\n    setC3('')\r\n    setC4('')\r\n*/},[MATERIA_ID]);var updates=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(m,u){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://actualiza los griterios despues de incertar en la db m:materia u:unidad\nconsole.log('hook update');_context2.next=3;return getCriterios(m,u);case 3:_context2.next=5;return Promise.all([ccx1=dataCriterios[0].porcentageC1,ccx2=dataCriterios[0].porcentageC2,ccx3=dataCriterios[0].porcentageC3,ccx4=dataCriterios[0].porcentageC4// crt1 = dataCriterios[0].criterio1,\n//crt2 = dataCriterios[0].criterio2,\n//crt3 = dataCriterios[0].criterio3,\n//  crt4 = dataCriterios[0].criterio4\n]);case 5:setCcx4(ccx4);setCcx3(ccx3);setCcx2(ccx2);setCcx1(ccx1);BC1.current.value=ccx1;BC2.current.value=ccx2;BC3.current.value=ccx3;BC4.current.value=ccx4;BC1.current.style.display='block';BC2.current.style.display='block';BC3.current.style.display='block';BC4.current.style.display='block';/* setC1(crt1)\r\n    setC2(crt2)\r\n    setC3(crt3)\r\n    setC4(crt4)*/console.log('finnn-......');return _context2.abrupt(\"return\",true);case 19:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref.apply(this,arguments);};}(),[]);var guardarPorcentaje_c1=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var input;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0://inicio\ninput=document.getElementById('porcentajeC1');input.addEventListener('input',function(){if(this.value.length>2)this.value=this.value.slice(0,2);});if(input.value<=100){if(input.value.length===2){//enviar porcentage y comentario   \nEnviarCriterios(1,input.value,\"sin descripcion\",updates).then(function(res){toastr.success('Guardado','Porcentaje 1');});}}else{toastr.warning('No puede exeder de 100 %','Porcentaje 1');}case 3:case\"end\":return _context3.stop();}}},_callee3);})),[]);//fin\nvar guardarPorcentaje_c2=useCallback(function(e){//inicio\nconsole.log('hook porcentaje 2');var input2=document.getElementById('porcentajeC2');//inicio 1\ninput2.addEventListener('input',function(){if(this.value.length>2)this.value=this.value.slice(0,2);});if(input2.value<=100){if(input2.value.length===2){//ejecutar metodo de guardar\nEnviarCriterios(2,input2.value,'sin descri',updates).then(function(res){toastr.success('Guardado','Porcentaje 2');});}}else{alert(\"No puede exeder de 100 %\");}},[]);//fin\nvar guardarPorcentaje_c3=useCallback(function(e){//inicio\nconsole.log('hook porcentaje 3');var input3=document.getElementById('porcentajeC3');//inicio 1\ninput3.addEventListener('input',function(){if(this.value.length>2)this.value=this.value.slice(0,2);});if(input3.value<=100){if(input3.value.length===2){EnviarCriterios(3,input3.value,'sin comentario',updates).then(function(res){toastr.success('Guardado','Porcentaje 3');});}}else{alert(\"No puede exeder de 100 %\");}},[]);//fin\nvar guardarPorcentaje_c4=useCallback(function(e){//inicio\nconsole.log('hook porcentaje 4');var input4=document.getElementById('porcentajeC4');//inicio 1\ninput4.addEventListener('input',function(){if(this.value.length>2)this.value=this.value.slice(0,2);});if(input4.value<=100){if(input4.value.length===2){EnviarCriterios(4,input4.value,'comentario',updates).then(function(res){toastr.success('Guardado','Porcentaje 4');});}}else{alert(\"No puede exeder de 100 %\");}},[]);//fin\nfuntions.add(updates);funtions.add(guardarPorcentaje_c1);funtions.add(guardarPorcentaje_c2);funtions.add(guardarPorcentaje_c3);funtions.add(guardarPorcentaje_c4);console.log(funtions);var _React$useState21=React.useState({// datos de la tabla calificacion\ncolumns:[{title:'Nª',field:'nm',editable:'never',defaultSort:'asc'},{title:'Control',field:'control',editable:'never',disablePadding:true,minWidth:10,sorting:false,cellStyle:{textAlign:\"left\",paddingTop:2,paddingBottom:0}},{title:'Nombre',field:'nameAlumno',editable:'never',disablePadding:true,sorting:false},{title:'Curso',field:'curso',editable:'never',disablePadding:true,minWidth:10,sorting:false},{title:'Opcion',field:'opcion',disablePadding:true,minWidth:10,lookup:{1:'1RA',2:'2DA'},sorting:false},{title:'C1  ',field:'calR1',sorting:false},{title:'C2',field:'calR2',sorting:false},{title:'C3',field:'calR3',sorting:false},{title:'C4',field:'calR4',sorting:false},{title:'#',field:'#',editable:'never',size:'small',disablePadding:true,sorting:false},{title:React.createElement(\"input\",{className:\"inputTemas\",id:\"porcentajeC1\",placeholder:\"C1\",style:{width:'4ch'},ref:BC1,onChange:guardarPorcentaje_c1}),field:'calCriterio1',editable:'never',minWidth:10,disablePadding:true,sorting:false},{title:React.createElement(\"input\",{className:\"inputTemas\",id:\"porcentajeC2\",placeholder:\"C2\",style:{width:'4ch'},ref:BC2,onChange:guardarPorcentaje_c2}),field:'calCriterio2',editable:'never',minWidth:10,disablePadding:true,sorting:false},{title:React.createElement(\"input\",{className:\"inputTemas\",id:\"porcentajeC3\",placeholder:\"C3\",style:{width:'4ch'},ref:BC3,onChange:guardarPorcentaje_c3}),field:'calCriterio3',editable:'never',disablePadding:true,sorting:false},{title:React.createElement(\"input\",{className:\"inputTemas\",id:\"porcentajeC4\",placeholder:\"C4\",style:{width:'4ch'},ref:BC4,onChange:guardarPorcentaje_c4}),field:'calCriterio4',editable:'never',disablePadding:true,sorting:false},{title:'Total',field:'calificaciontotal',editable:'never',disablePadding:true,sorting:false}]}),_React$useState22=_slicedToArray(_React$useState21,2),alumnos=_React$useState22[0],setAlumnos=_React$useState22[1];//\nreturn React.createElement(\"div\",null,React.createElement(Backdrop,{className:estilos.backdrop,open:open},React.createElement(CircularProgress,{color:\"inherit\"})),React.createElement(Grid,{container:true,spacing:2},React.createElement(Grid,{item:true,xs:12},React.createElement(\"h3\",{style:{textAlign:'center'}},\"INSTITUTO TECNOL\\xD3GICO SUPERIOR DE LOS R\\xCDOS\")),React.createElement(Grid,{item:true,xs:6,sm:3},React.createElement(Paper,{elevation:0,className:estilos.paperperiodos},React.createElement(\"strong\",null,\"PERIODO:\"),dataPeriodo[0].rango)),React.createElement(Grid,{item:true,xs:6,sm:3},React.createElement(Paper,{elevation:0,className:estilos.paperperiodos},React.createElement(\"strong\",null,\"CIERRE DE ACTA: \"),moment(cierre).format('DD-MM-YYYY'))),React.createElement(Grid,{item:true,xs:12,sm:6},React.createElement(Paper,{className:estilos.paperAvatar,elevation:0})),React.createElement(Grid,{item:true,xs:6,sm:3},React.createElement(Paper,{elevation:0,className:estilos.papermaterias},React.createElement(SelecMaterias,{setListas:setListas,setcalificaciones:setcalificaciones,setMATERIA_ID:setMATERIA_ID,minimo:minimo,cierre:cierre}))),React.createElement(Grid,{item:true,xs:6,sm:3},React.createElement(Paper,{elevation:0,className:estilos.papermaterias},React.createElement(SelectTemas,{setcalificaciones:setcalificaciones,updates:updates,listasTemas:listasTemas,setOpen:setOpen,MATERIA_ID:MATERIA_ID}))),React.createElement(Grid,{item:true,xs:12,sm:6}),React.createElement(Grid,{item:true,xs:12,sm:12},React.createElement(Paper,{elevation:3},React.createElement(TablaCapturaCalificaciones,{alumnos:alumnos,setcalificaciones:setcalificaciones,calificaciones:calificaciones,ccx1:ccx11,ccx2:ccx21,ccx3:ccx31,ccx4:ccx41}))),React.createElement(Grid,{item:true,xs:12,sm:6},React.createElement(Paper,null,\"*O: Ordinario   *1:Primera oportunidad   *NA: No Alcanza\"),React.createElement(Paper,null,\"*R: Repeticion   *2:Segunda oportunidad\"),React.createElement(Paper,null,\"*E: Especial\")),React.createElement(Grid,{item:true,xs:12},React.createElement(\"div\",{style:{display:'inline-flex'}},React.createElement(ReportParciales,null),React.createElement(ActaFinal,null)))));};export default React.memo(MaterialTableDemo);","map":{"version":3,"sources":["E:/Certificados/heroku/pruevaparaproduccion/DOCENTES/itsrdocentes/src/componentes/contenedores/docente_calificaciones/tabla_calificaciones.jsx"],"names":["React","useEffect","useRef","useCallback","Button","Grid","Paper","SaveIcon","Backdrop","CircularProgress","moment","swal","toastr","LinearProgress","useStyles","dataPeriodo","getAdmiFechas","datalistaAlumnos","getCriterios","dataCriterios","dataFechasCierre","SelecMaterias","SelectTemas","ChipCriterios","TablaCapturaCalificaciones","EnviarCriterios","ReportParciales","ActaFinal","unidad_Tema","ccx1","ccx2","ccx3","ccx4","funtions","Set","MaterialTableDemo","estilos","useState","open","setOpen","calificaciones","setcalificaciones","listasTemas","setListas","MATERIA_ID","setMATERIA_ID","cierre","setCierre","minimo","setMinimo","ccx41","setCcx4","ccx31","setCcx3","ccx21","setCcx2","ccx11","setCcx1","BC1","BC2","BC3","BC4","fecha_actual","Date","format","current","style","display","fechasGet","console","log","length","primera","primera_entrega","segunda","segunda_entrega","tercera","tercera_entrega","entrega_final","rest","subtract","alert","value","updates","m","u","Promise","all","porcentageC1","porcentageC2","porcentageC3","porcentageC4","guardarPorcentaje_c1","input","document","getElementById","addEventListener","slice","then","res","success","warning","guardarPorcentaje_c2","e","input2","guardarPorcentaje_c3","input3","guardarPorcentaje_c4","input4","add","columns","title","field","editable","defaultSort","disablePadding","minWidth","sorting","cellStyle","textAlign","paddingTop","paddingBottom","lookup","size","width","alumnos","setAlumnos","backdrop","paperperiodos","rango","paperAvatar","papermaterias","memo"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useCallback } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport moment from 'moment';\r\nimport swal from 'sweetalert';\r\nimport *as toastr from 'toastr';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\nimport './calificaciones.css';\r\nimport { useStyles } from './dialogos_calificacion';\r\nimport { dataPeriodo, getAdmiFechas } from '../../servicios/api';\r\nimport { datalistaAlumnos, getCriterios, dataCriterios, } from '../../servicios/api';\r\nimport { dataFechasCierre } from '../../servicios/api';\r\nimport { SelecMaterias } from './select_materia';\r\nimport { SelectTemas } from './select_temas';\r\nimport { ChipCriterios } from './chip_criterios';\r\nimport { TablaCapturaCalificaciones } from './Tabla_registro';\r\nimport { EnviarCriterios } from './cont_criterios';\r\nimport {ReportParciales} from './reportes/parciales/parciales';\r\nimport {ActaFinal} from './reportes/actaFinal/acta'\r\nexport var unidad_Tema;\r\n//unidadCalificacion, id_criterios\r\nvar ccx1 = 0, ccx2 = 0, ccx3 = 0, ccx4 = 0;\r\n //var crt1 = 'Criterio 1', crt2 = 'Criterio 2', crt3 = 'Criterio 3', crt4 = 'Criterio 4';\r\n\r\n\r\n\r\n\r\nconst funtions = new Set();\r\n\r\n\r\nexport const MaterialTableDemo = () => {//inicio del componente\r\n\r\n  const estilos = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [calificaciones, setcalificaciones] = React.useState({ datalistaAlumnos });\r\n  const [listasTemas, setListas] = React.useState([]);\r\n  const [MATERIA_ID, setMATERIA_ID] = React.useState([]);\r\n  const [cierre, setCierre] = React.useState(false);\r\n  const [minimo, setMinimo] = React.useState(false);\r\n\r\n  const [ccx41, setCcx4] = React.useState(0);\r\n  const [ccx31, setCcx3] = React.useState(0);\r\n  const [ccx21, setCcx2] = React.useState(0);\r\n  const [ccx11, setCcx1] = React.useState(0);\r\n\r\n\r\n \r\n\r\n  const BC1 = useRef();\r\n  const BC2 = useRef();\r\n  const BC3 = useRef();\r\n  const BC4 = useRef();\r\n  //moment(new Date('2020-03-31')).format('YYYY-MM-DD'); fecha para las pruebas de cierre de acta\r\n  //let get_materia_id; \r\n  const fecha_actual = moment(new Date()).format('YYYY-MM-DD'); // aca esta la fecha en tiempo real\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    setcalificaciones({ datalistaAlumnos: [] })\r\n    BC1.current.style.display = 'none'\r\n    BC2.current.style.display = 'none'\r\n    BC3.current.style.display = 'none'\r\n    BC4.current.style.display = 'none'\r\n\r\n    // document.getElementById('porcentajeC1').disabled = true;\r\n    async function fechasGet() {//establese el cieere de acta de acuerdo la fecha actual\r\n      console.log(dataFechasCierre)\r\n      try {\r\n        if (dataFechasCierre.length === 0) {\r\n          console.log('iniciando la peticon de fechas')\r\n          await getAdmiFechas()\r\n        }\r\n\r\n        var primera = moment(dataFechasCierre[0].primera_entrega).format('YYYY-MM-DD');\r\n        var segunda = moment(dataFechasCierre[0].segunda_entrega).format('YYYY-MM-DD'); //entrega_final\r\n        var tercera = moment(dataFechasCierre[0].tercera_entrega).format('YYYY-MM-DD');\r\n        var entrega_final = moment(dataFechasCierre[0].entrega_final).format('YYYY-MM-DD');\r\n\r\n\r\n        if (fecha_actual <= primera) {\r\n          let rest = moment(fecha_actual).subtract(2, 'month'); //rango de la fechas de busqueda\r\n          setCierre(primera)\r\n          setMinimo(moment(rest).format('YYYY-MM-DD'))\r\n        } else if (fecha_actual <= segunda) {\r\n          setCierre(segunda)\r\n          setMinimo(primera)\r\n        } else if (fecha_actual <= tercera) {\r\n          setCierre(tercera)\r\n          setMinimo(segunda)\r\n        } else if(fecha_actual <= entrega_final){\r\n          setCierre(entrega_final)\r\n          setMinimo(tercera)\r\n        }else{\r\n          alert(\"Sin fechas de cierre definidas por el momento \")\r\n        }\r\n      } catch (error) {\r\n        //pendiente\r\n      }\r\n    }\r\n\r\n\r\n    fechasGet()\r\n\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log('actualizando clen')\r\n    ccx1=0\r\n    ccx2=0\r\n    ccx3=0\r\n    ccx4=0\r\n    setCcx4(0)\r\n    setCcx3(0)\r\n    setCcx2(0)\r\n    setCcx1(0)\r\n    BC1.current.value = 0\r\n    BC2.current.value = 0\r\n    BC3.current.value = 0\r\n    BC4.current.value = 0\r\n\r\n    /* \r\n    setC1('')\r\n    setC2('')\r\n    setC3('')\r\n    setC4('')\r\n*/\r\n  },[MATERIA_ID])\r\n\r\n\r\n\r\n  const updates = useCallback(async (m, u) => {//actualiza los griterios despues de incertar en la db m:materia u:unidad\r\n    console.log('hook update')\r\n    await getCriterios(m, u);// LISTA DE CRITERIO getTem\r\n    await Promise.all([\r\n      ccx1 = dataCriterios[0].porcentageC1,\r\n      ccx2 = dataCriterios[0].porcentageC2,\r\n      ccx3 = dataCriterios[0].porcentageC3,\r\n      ccx4 = dataCriterios[0].porcentageC4,\r\n     // crt1 = dataCriterios[0].criterio1,\r\n      //crt2 = dataCriterios[0].criterio2,\r\n      //crt3 = dataCriterios[0].criterio3,\r\n    //  crt4 = dataCriterios[0].criterio4\r\n    ]);\r\n    setCcx4(ccx4)\r\n    setCcx3(ccx3)\r\n    setCcx2(ccx2)\r\n    setCcx1(ccx1)\r\n\r\n\r\n    BC1.current.value = ccx1\r\n    BC2.current.value = ccx2\r\n    BC3.current.value = ccx3\r\n    BC4.current.value = ccx4\r\n\r\n    BC1.current.style.display = 'block'\r\n    BC2.current.style.display = 'block'\r\n    BC3.current.style.display = 'block'\r\n    BC4.current.style.display = 'block'\r\n\r\n   /* setC1(crt1)\r\n    setC2(crt2)\r\n    setC3(crt3)\r\n    setC4(crt4)*/\r\n    console.log('finnn-......')\r\n    return true\r\n  }, [])\r\n\r\n\r\n  const guardarPorcentaje_c1 = useCallback(async () => {//inicio\r\n\r\n    var input = document.getElementById('porcentajeC1');\r\n    input.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n    if (input.value <= 100) {\r\n      if (input.value.length === 2) {\r\n        \r\n              //enviar porcentage y comentario   \r\n              EnviarCriterios(1, input.value, \"sin descripcion\", updates).then(res => { toastr.success('Guardado', 'Porcentaje 1') })\r\n      }\r\n    } else {\r\n      toastr.warning('No puede exeder de 100 %', 'Porcentaje 1')\r\n    }\r\n  }, [])//fin\r\n\r\n\r\n  const guardarPorcentaje_c2 = useCallback((e) => {//inicio\r\n    console.log('hook porcentaje 2')\r\n\r\n    var input2 = document.getElementById('porcentajeC2');//inicio 1\r\n    input2.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n    if (input2.value <= 100) {\r\n      if (input2.value.length === 2) {\r\n        //ejecutar metodo de guardar\r\n              EnviarCriterios(2, input2.value, 'sin descri', updates).then(res => { toastr.success('Guardado', 'Porcentaje 2') })\r\n      }\r\n    } else {\r\n      alert(\"No puede exeder de 100 %\")\r\n    }\r\n  }, [])//fin\r\n\r\n\r\n\r\n  const guardarPorcentaje_c3 = useCallback((e) => {//inicio\r\n    console.log('hook porcentaje 3')\r\n\r\n    var input3 = document.getElementById('porcentajeC3');//inicio 1\r\n    input3.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n    if (input3.value <= 100) {\r\n      if (input3.value.length === 2) {\r\n              EnviarCriterios(3, input3.value, 'sin comentario', updates).then(res => { toastr.success('Guardado', 'Porcentaje 3') })\r\n      }\r\n    } else {\r\n      alert(\"No puede exeder de 100 %\")\r\n    }\r\n  }, [])//fin\r\n\r\n\r\n  const guardarPorcentaje_c4 = useCallback((e) => {//inicio\r\n    console.log('hook porcentaje 4')\r\n\r\n    var input4 = document.getElementById('porcentajeC4');//inicio 1\r\n    input4.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n    if (input4.value <= 100) {\r\n      if (input4.value.length === 2) {\r\n              EnviarCriterios(4, input4.value, 'comentario', updates).then(res => { toastr.success('Guardado', 'Porcentaje 4') })\r\n      }\r\n    } else {\r\n      alert(\"No puede exeder de 100 %\")\r\n    }\r\n  }, [])//fin\r\n\r\n  funtions.add(updates)\r\n\r\n  funtions.add(guardarPorcentaje_c1)\r\n  funtions.add(guardarPorcentaje_c2)\r\n  funtions.add(guardarPorcentaje_c3)\r\n  funtions.add(guardarPorcentaje_c4)\r\n  console.log(funtions)\r\n\r\n\r\n\r\n\r\n\r\n\r\n  const [alumnos, setAlumnos] = React.useState({// datos de la tabla calificacion\r\n    columns: [\r\n      { title: 'Nª', field: 'nm', editable: 'never', defaultSort: 'asc' },\r\n      {\r\n        title: 'Control', field: 'control', editable: 'never', disablePadding: true, minWidth: 10,sorting:false ,\r\n        cellStyle: {  textAlign: \"left\", paddingTop: 2, paddingBottom: 0 }\r\n\r\n      },\r\n      { title: 'Nombre', field: 'nameAlumno', editable: 'never', disablePadding: true,sorting:false },\r\n      { title: 'Curso', field: 'curso', editable: 'never', disablePadding: true, minWidth: 10,sorting:false },\r\n      { title: 'Opcion', field: 'opcion', disablePadding: true, minWidth: 10, lookup: { 1:'1RA', 2: '2DA' },sorting:false },\r\n      { title: 'C1  ', field: 'calR1', sorting:false },\r\n      { title: 'C2', field: 'calR2', sorting:false },\r\n      { title: 'C3', field: 'calR3', sorting:false },\r\n      { title: 'C4', field: 'calR4', sorting:false },\r\n      { title: '#', field: '#', editable: 'never', size: 'small', disablePadding: true,sorting:false },\r\n      { title: <input className=\"inputTemas\" id=\"porcentajeC1\" placeholder=\"C1\" style={{ width: '4ch' }} ref={BC1} onChange={guardarPorcentaje_c1} ></input>, field: 'calCriterio1', editable: 'never', minWidth: 10, disablePadding: true,sorting:false },\r\n      { title: <input className=\"inputTemas\" id=\"porcentajeC2\" placeholder=\"C2\" style={{ width: '4ch' }} ref={BC2} onChange={guardarPorcentaje_c2} ></input>, field: 'calCriterio2', editable: 'never', minWidth: 10, disablePadding: true,sorting:false },\r\n      { title: <input className=\"inputTemas\" id=\"porcentajeC3\" placeholder=\"C3\" style={{ width: '4ch' }} ref={BC3} onChange={guardarPorcentaje_c3}  ></input>, field: 'calCriterio3', editable: 'never', disablePadding: true,sorting:false },\r\n      { title: <input className=\"inputTemas\" id=\"porcentajeC4\" placeholder=\"C4\" style={{ width: '4ch' }} ref={BC4} onChange={guardarPorcentaje_c4}  ></input>, field: 'calCriterio4', editable: 'never', disablePadding: true,sorting:false },\r\n      { title: 'Total', field: 'calificaciontotal', editable: 'never', disablePadding: true, sorting:false }\r\n    ]\r\n  })\r\n\r\n  //\r\n\r\n  return (\r\n    <div>\r\n      <Backdrop className={estilos.backdrop} open={open} >\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12}>\r\n          <h3 style={{textAlign:'center'}}>INSTITUTO TECNOLÓGICO SUPERIOR DE LOS RÍOS</h3>\r\n        </Grid>\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.paperperiodos}><strong>PERIODO:</strong>{dataPeriodo[0].rango}</Paper>\r\n        </Grid>\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.paperperiodos}><strong>CIERRE DE ACTA: </strong>{moment(cierre).format('DD-MM-YYYY')}</Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <Paper className={estilos.paperAvatar} elevation={0} >\r\n            {/*<ChipCriterios\r\n              ccx1={ccx1} ccx2={ccx2} ccx3={ccx3} ccx4={ccx4}\r\n              c1={c1} c2={c2} c3={c3} c4={c4} />*/}\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.papermaterias}>\r\n            <SelecMaterias setListas={setListas} setcalificaciones={setcalificaciones}\r\n              setMATERIA_ID={setMATERIA_ID} minimo={minimo} cierre={cierre} />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.papermaterias}>\r\n\r\n            <SelectTemas setcalificaciones={setcalificaciones}\r\n              updates={updates} listasTemas={listasTemas}\r\n\r\n              setOpen={setOpen}\r\n              MATERIA_ID={MATERIA_ID} />\r\n            {/*<SelectTemas unidad={unidad} lisTemas={obtenerTema}  listasTemas={listasTemas}/>*/}\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n        </Grid>\r\n        <Grid item xs={12} sm={12}>\r\n          <Paper elevation={3} >\r\n            <TablaCapturaCalificaciones\r\n              alumnos={alumnos} setcalificaciones={setcalificaciones} calificaciones={calificaciones}\r\n              ccx1={ccx11} ccx2={ccx21} ccx3={ccx31} ccx4={ccx41} />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <Paper >*O: Ordinario   *1:Primera oportunidad   *NA: No Alcanza</Paper>\r\n          <Paper >*R: Repeticion   *2:Segunda oportunidad</Paper>\r\n          <Paper >*E: Especial</Paper>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <div style={{display:'inline-flex'}}>\r\n        <ReportParciales/>\r\n        <ActaFinal/>\r\n        </div>\r\n        \r\n         {/*<Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            startIcon={<SaveIcon />}>\r\n            Descargar Reporte de Calificaciones\r\n          </Button>*/} \r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default React.memo(MaterialTableDemo);"]},"metadata":{},"sourceType":"module"}