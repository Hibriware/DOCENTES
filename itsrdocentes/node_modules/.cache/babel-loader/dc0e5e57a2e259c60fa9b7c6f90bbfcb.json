{"ast":null,"code":"var _jsxFileName = \"E:\\\\Certificados\\\\itsrdocentes\\\\itsrdocentes\\\\src\\\\componentes\\\\contenedores\\\\docente_calificaciones\\\\tablaprueva.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport MaterialTable from 'material-table';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport SaveIcon from '@material-ui/icons/Save';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport swal from 'sweetalert';\nimport { makeStyles } from '@material-ui/core/styles';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputAdornment from '@material-ui/core/InputAdornment'; //importdos\n\nimport { data } from './clase_principal_calificaciones';\nimport './calificaciones.css'; //variables\n\nimport { tema1X, tema2X, tema3X, porcentajeActual, dataAlumnos } from './clase_principal_calificaciones';\nimport { startOfYesterday } from 'date-fns';\nimport { dataMateria } from '../../../home';\nimport { getTemas } from '../../servicios/api';\nimport { datalista } from '../../servicios/api';\nimport { getAlumnos } from '../../servicios/api';\nimport { datalistaAlumnos } from '../../servicios/api';\nimport { getCriterios } from '../../servicios/api';\nimport { dataCriterios } from '../../servicios/api';\nimport { fecha1, fecha2, fecha3 } from '../../../home';\nimport { PERIODO_ACTUAL } from '../../../App';\nimport TextField from '@material-ui/core/TextField';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport moment from 'moment';\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    display: 'flex',\n    margin: theme.spacing(1),\n    minWidth: 180\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(-1)\n  },\n  papermaterias: {\n    padding: theme.spacing(-1),\n    textAlign: 'left',\n    color: theme.palette.text.secondary\n  },\n  paperperiodos: {\n    padding: theme.spacing(-2),\n    textAlign: 'left',\n    color: theme.palette.text.primary\n  }\n}));\n\nconst MaterialTableDemo = ({\n  generalAlumnos,\n  materiasDocentes,\n  porcentaje,\n  updateCalificacion\n}) => {\n  const estilos = useStyles();\n  const [materiaID, setMateriaid] = React.useState(''); //id materia para filtrar unidades\n\n  const handleChange = event => {\n    setMateriaid(Number(event.target.value) || '');\n  };\n\n  const [listasTemas, setListas] = React.useState([]);\n  var idDocenteActual, idMateriaActual, periodoActual, cierreActual;\n\n  const buscarTema = async materiaid => {\n    //obtener datos para la consulta de unidades actuales y antes delcieere actual\n    idDocenteActual = dataMateria[0].id_docente;\n    idMateriaActual = materiaid.target.value;\n    periodoActual = 7;\n    cierreActual = fecha1; //fecha1.setMonth(fecha1.getMonth() - 3);\n\n    setMATERIA_ID(idMateriaActual);\n    let fecheFull = moment(fecha1).subtract(2, 'months');\n    let vc = moment(fecheFull).format(\"YYYY-MM-DD\");\n    let bbv = await getTemas(idDocenteActual, idMateriaActual, periodoActual, cierreActual);\n    setListas(datalista);\n    console.log(bbv);\n    console.log(\"<<<<\");\n    console.log(datalista);\n    console.log(idMateriaActual + ' _actual id');\n    console.log(vc + ' _actual id');\n  };\n\n  const [calificaciones, setcalificaciones] = React.useState({\n    datalistaAlumnos\n  });\n  const [MATERIA_ID, setMATERIA_ID] = React.useState([]);\n  const [CRITERIOS, setCRITERIOS] = React.useState([]);\n\n  const obtenerTema = async tem => {\n    //inico\n    let numTemas = tem.target.value; //buscar lista alumnos  idMateria, idDocente\n\n    await getAlumnos(MATERIA_ID, PERIODO_ACTUAL); //LISTA DE ALUMNOS\n\n    await getCriterios(PERIODO_ACTUAL, MATERIA_ID, numTemas); // LISTA DE CRITERIO\n\n    await setcalificaciones({\n      datalistaAlumnos: datalistaAlumnos\n    });\n    await setCRITERIOS(dataCriterios);\n    console.log(calificaciones);\n    console.log('ver tema inf.. ' + numTemas + ' materia = ' + MATERIA_ID + ' periodo ' + PERIODO_ACTUAL);\n    console.log(listasTemas);\n    console.log('VER.. ');\n    console.log(dataCriterios);\n  }; //fin\n\n\n  const manejador = (cc1, cc2, cc3) => {\n    //creador de table\n    console.log(\"imprimiendo.....\" + tema1X);\n    console.log(\"datos new.....\" + cc1 + cc2 + cc3);\n  };\n\n  const [ac, setAc] = React.useState('none'); //guardar porcentaje #########\n\n  const guardarPorcentaje = e => {\n    var input = document.getElementById('porcentajeC1');\n    input.addEventListener('input', function () {\n      if (this.value.length > 2) this.value = this.value.slice(0, 2);\n    });\n\n    if (input.value.length === 2) {\n      setAc('block');\n      swal({\n        title: \"Are you sure?\",\n        text: \"Once deleted, you will not be able to recover this imaginary file!\",\n        icon: \"warning\",\n        buttons: true,\n        dangerMode: true\n      }).then(guardar => {\n        if (guardar) {\n          guardar_nuevo_criterio();\n        } else {\n          swal(\"Your imaginary file is safe!\");\n        }\n      });\n      console.log(input); //document.getElementById('most').style = 'none';\n\n      setAc('none'); // falta\n    }\n\n    var input2 = document.getElementById('porcentajeC2'); //inicio2\n\n    input2.addEventListener('input', function () {\n      if (this.value.length > 2) this.value = this.value.slice(0, 2);\n    });\n\n    if (input2.value.length === 2) {\n      setAc('block');\n      console.log(\"guardar cambios cambio....\" + input2.value);\n      setAc('none'); // falta\n    } // fin 2\n\n\n    var input3 = document.getElementById('porcentajeC3'); //inicio3\n\n    input3.addEventListener('input', function () {\n      if (this.value.length > 2) this.value = this.value.slice(0, 2);\n    });\n\n    if (input3.value.length === 2) {\n      setAc('block');\n      console.log(input.value + ' :_ : ' + input2.value + ':_ :' + input3.value);\n      setAc('none'); // falta\n    } // fin 3\n\n\n    if (parseInt(input.value) > 100) {\n      alert('no puede eceder mas 100 %');\n    } else {\n      if (parseInt(input.value) + parseInt(input2.value) > 100) {\n        alert('no puede eceder mas 100 %');\n      } else {\n        if (parseInt(input.value) + parseInt(input2.value) + parseInt(input3.value) > 100) {\n          alert('no puede eceder mas 100 %');\n        }\n      }\n    }\n  }; //fin\n\n\n  const guardar_nuevo_criterio = dato => {\n    //CRITERIOS\n    console.log('guardado');\n    swal(\"Poof! Your imaginary file has been deleted!\", {\n      icon: \"success\"\n    });\n  };\n\n  const [alumnos, setAlumnos] = React.useState({\n    columns: [{\n      title: 'Nª',\n      field: 'id',\n      editable: 'never'\n    }, {\n      title: 'Control',\n      field: 'control',\n      editable: 'never'\n    }, {\n      title: 'Nombre',\n      field: 'nameAlumno',\n      editable: 'never'\n    }, {\n      title: 'Curso',\n      field: 'curso',\n      editable: 'never' // lookup: { 34: 'İstanbul', 63: 'Şanlıurfa' },\n\n    }, {\n      title: 'Opcion',\n      field: 'opcion',\n      editable: 'never'\n    }, {\n      title: 'C1',\n      field: 'calR1'\n    }, {\n      title: 'C2',\n      field: 'calR2'\n    }, {\n      title: 'C3',\n      field: 'calR3'\n    }, {\n      title: '#',\n      field: '#',\n      editable: 'never'\n    }, {\n      title: React.createElement(\"input\", {\n        className: \"inputTemas\",\n        type: \"number\",\n        id: \"porcentajeC1\",\n        placeholder: CRITERIOS.porcentajeC1,\n        style: {\n          width: '4ch'\n        },\n        onChange: guardarPorcentaje,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }),\n      field: 'calCriterio1',\n      editable: 'never',\n      minWidth: 10\n    }, {\n      title: React.createElement(\"input\", {\n        className: \"inputTemas\",\n        id: \"porcentajeC2\",\n        placeholder: CRITERIOS.porcentajeC2,\n        style: {\n          width: '4ch'\n        },\n        onChange: guardarPorcentaje,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }),\n      field: 'calCriterio2',\n      editable: 'never',\n      minWidth: 10\n    }, {\n      title: React.createElement(\"input\", {\n        className: \"inputTemas\",\n        id: \"porcentajeC3\",\n        placeholder: CRITERIOS.porcentajeC3,\n        style: {\n          width: '4ch'\n        },\n        onChange: guardarPorcentaje,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }),\n      field: 'calCriterio3',\n      editable: 'never'\n    }, {\n      title: 'Total',\n      field: 'calificaciontotal',\n      editable: 'never'\n    }],\n    generalAlumnos\n  }); //\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246\n    },\n    __self: this\n  }, \" INSTITUTO TECNOLOGICO SUPERIOR DE LOS RIOS \")), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 0,\n    className: estilos.paperperiodos,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249\n    },\n    __self: this\n  }, \"PERIODO: \", dataMateria[0].idnomenclaturaPeriodo)), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 0,\n    className: estilos.paperperiodos,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252\n    },\n    __self: this\n  }, \"CIERRE DE ACTA: \", fecha1)), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    id: \"most\",\n    style: {\n      display: ac\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  }, \"espere..\", React.createElement(LinearProgress, {\n    variant: \"query\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  })))), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 0,\n    className: estilos.papermaterias,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259\n    },\n    __self: this\n  }, React.createElement(FormControl, {\n    variant: \"outlined\",\n    className: estilos.formControl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260\n    },\n    __self: this\n  }, React.createElement(InputLabel, {\n    id: \"InputLabel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261\n    },\n    __self: this\n  }, \"Materia\"), React.createElement(Select, {\n    labelId: \"demo-simple-select-outlined\",\n    id: \"materia\",\n    valeu: \"\",\n    onChange: buscarTema,\n    label: \"Materia\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262\n    },\n    __self: this\n  }, dataMateria.map(materias => React.createElement(MenuItem, {\n    key: materias.nm,\n    value: materias.idMateria,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271\n    },\n    __self: this\n  }, materias.nombre + ' (' + materias.semestre + \"/\" + materias.nomenclatura + \") \" + materias.nombreCorto)))))), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 0,\n    className: estilos.papermaterias,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280\n    },\n    __self: this\n  }, React.createElement(FormControl, {\n    variant: \"outlined\",\n    className: estilos.formControl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281\n    },\n    __self: this\n  }, React.createElement(InputLabel, {\n    id: \"demo-simple-select-outlined-labe\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282\n    },\n    __self: this\n  }, \"Unidad\"), React.createElement(Select, {\n    labelId: \"demo-simple-select-outlined-labe\",\n    id: \"unidad\",\n    label: \"Unidad\",\n    onChange: obtenerTema,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283\n    },\n    __self: this\n  }, listasTemas.map((tem, i) => React.createElement(MenuItem, {\n    key: i,\n    value: tem.numUnidad,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290\n    },\n    __self: this\n  }, tem.tema)))))), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298\n    },\n    __self: this\n  }), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308\n    },\n    __self: this\n  }, \"guardar\"), React.createElement(MaterialTable, {\n    title: \"Captura de calificaciones\",\n    columns: alumnos.columns //columnas\n    ,\n    data: calificaciones.datalistaAlumnos //filas\n    ,\n    actions: [{\n      icon: 'save',\n      tooltip: 'Save User',\n      onClick: (event, rowData) => alert(\"You saved \" + rowData.control + \" c1=\" + rowData.calR1)\n    }],\n    editable: {\n      // filsa: rowData => rowData.id === '1',\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n\n          if (oldData) {\n            //actualizacion del estado\n            updateCalificacion(newData);\n            setcalificaciones(prevState => {\n              const datalistaAlumnos = [...prevState.datalistaAlumnos]; //obtenr data\n              //console.log(newData.nombre = 'sam')//estado fila modificado\n\n              console.log(newData.calCriterio1 = newData.calR1 * (porcentaje[0].t1 / 100));\n              console.log(newData.calCriterio2 = newData.calR2 * (porcentaje[0].t2 / 100));\n              console.log(newData.calCriterio3 = newData.calR3 * (porcentaje[0].t3 / 100));\n              console.log(newData.calificaciontotal = newData.calR1 + newData.calR2 + newData.calR3);\n              console.log(newData); //estado fila modificado\n\n              datalistaAlumnos[datalistaAlumnos.indexOf(oldData)] = newData; // manejador(newData.c1, newData.c2, newData.c3)\n\n              return { ...prevState,\n                datalistaAlumnos\n              };\n            });\n          }\n        }, 600);\n      })\n    },\n    options: {\n      headerStyle: {\n        backgroundColor: '#01579b',\n        color: '#FFF'\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309\n    },\n    __self: this\n  }))), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375\n    },\n    __self: this\n  }, \"*O: Ordinario   *1:Primera oportunidad   *NA: No Alcanza\"), React.createElement(Paper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376\n    },\n    __self: this\n  }, \"*R: Repeticion   *2:Segunda oportunidad\"), React.createElement(Paper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377\n    },\n    __self: this\n  }, \"*E: Especial\")), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"small\",\n    onClick: manejador,\n    startIcon: React.createElement(SaveIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380\n    },\n    __self: this\n  }, \"Descargar Reporte de Calificaciones\"))));\n};\n\nconst mapStateToProps = state => ({\n  generalAlumnos: state.alumnosState,\n  materiasDocentes: state.materias,\n  porcentaje: state.porcentaje\n});\n\nconst mapDispatchToProps = dispatch => ({\n  updateCalificacion(calificacionNew) {\n    dispatch({\n      type: \"updateCalificacion\",\n      calificacionNew\n    });\n  }\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MaterialTableDemo);","map":{"version":3,"sources":["E:/Certificados/itsrdocentes/itsrdocentes/src/componentes/contenedores/docente_calificaciones/tablaprueva.jsx"],"names":["React","useState","useEffect","connect","MaterialTable","Button","Grid","Paper","SaveIcon","InputLabel","FormControl","Select","MenuItem","swal","makeStyles","OutlinedInput","InputAdornment","data","tema1X","tema2X","tema3X","porcentajeActual","dataAlumnos","startOfYesterday","dataMateria","getTemas","datalista","getAlumnos","datalistaAlumnos","getCriterios","dataCriterios","fecha1","fecha2","fecha3","PERIODO_ACTUAL","TextField","CircularProgress","LinearProgress","moment","useStyles","theme","formControl","display","margin","spacing","minWidth","selectEmpty","marginTop","papermaterias","padding","textAlign","color","palette","text","secondary","paperperiodos","primary","MaterialTableDemo","generalAlumnos","materiasDocentes","porcentaje","updateCalificacion","estilos","materiaID","setMateriaid","handleChange","event","Number","target","value","listasTemas","setListas","idDocenteActual","idMateriaActual","periodoActual","cierreActual","buscarTema","materiaid","id_docente","setMATERIA_ID","fecheFull","subtract","vc","format","bbv","console","log","calificaciones","setcalificaciones","MATERIA_ID","CRITERIOS","setCRITERIOS","obtenerTema","tem","numTemas","manejador","cc1","cc2","cc3","ac","setAc","guardarPorcentaje","e","input","document","getElementById","addEventListener","length","slice","title","icon","buttons","dangerMode","then","guardar","guardar_nuevo_criterio","input2","input3","parseInt","alert","dato","alumnos","setAlumnos","columns","field","editable","porcentajeC1","width","porcentajeC2","porcentajeC3","idnomenclaturaPeriodo","map","materias","nm","idMateria","nombre","semestre","nomenclatura","nombreCorto","i","numUnidad","tema","tooltip","onClick","rowData","control","calR1","onRowUpdate","newData","oldData","Promise","resolve","setTimeout","prevState","calCriterio1","t1","calCriterio2","calR2","t2","calCriterio3","calR3","t3","calificaciontotal","indexOf","headerStyle","backgroundColor","mapStateToProps","state","alumnosState","mapDispatchToProps","dispatch","calificacionNew","type"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport MaterialTable from 'material-table';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport swal from 'sweetalert';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\n//importdos\r\nimport { data } from './clase_principal_calificaciones';\r\nimport './calificaciones.css';\r\n//variables\r\nimport { tema1X, tema2X, tema3X, porcentajeActual, dataAlumnos } from './clase_principal_calificaciones';\r\nimport { startOfYesterday } from 'date-fns';\r\nimport { dataMateria } from '../../../home';\r\nimport { getTemas } from '../../servicios/api';\r\nimport { datalista } from '../../servicios/api';\r\nimport { getAlumnos } from '../../servicios/api';\r\nimport { datalistaAlumnos } from '../../servicios/api';\r\nimport { getCriterios } from '../../servicios/api';\r\nimport { dataCriterios } from '../../servicios/api';\r\nimport { fecha1, fecha2, fecha3 } from '../../../home';\r\nimport { PERIODO_ACTUAL } from '../../../App';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\n\r\nimport moment from 'moment'\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  formControl: {\r\n    display: 'flex',\r\n    margin: theme.spacing(1),\r\n    minWidth: 180,\r\n  },\r\n  selectEmpty: {\r\n    marginTop: theme.spacing(-1),\r\n  },\r\n  papermaterias: {\r\n    padding: theme.spacing(-1),\r\n    textAlign: 'left',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  paperperiodos: {\r\n    padding: theme.spacing(-2),\r\n    textAlign: 'left',\r\n    color: theme.palette.text.primary,\r\n  },\r\n}));\r\n\r\n\r\n\r\n\r\n\r\nconst MaterialTableDemo = ({ generalAlumnos, materiasDocentes, porcentaje, updateCalificacion }) => {\r\n\r\n\r\n\r\n  const estilos = useStyles();\r\n  const [materiaID, setMateriaid] = React.useState('');//id materia para filtrar unidades\r\n\r\n\r\n  const handleChange = event => {\r\n    setMateriaid(Number(event.target.value) || '');\r\n  };\r\n  const [listasTemas, setListas] = React.useState([])\r\n\r\n  var idDocenteActual, idMateriaActual, periodoActual, cierreActual;\r\n\r\n  const buscarTema = async materiaid => {\r\n\r\n    //obtener datos para la consulta de unidades actuales y antes delcieere actual\r\n    idDocenteActual = dataMateria[0].id_docente;\r\n    idMateriaActual = materiaid.target.value;\r\n    periodoActual = 7;\r\n    cierreActual = fecha1;\r\n    //fecha1.setMonth(fecha1.getMonth() - 3);\r\n    setMATERIA_ID(idMateriaActual)\r\n    let fecheFull = moment(fecha1).subtract(2, 'months')\r\n    let vc = moment(fecheFull).format(\"YYYY-MM-DD\");\r\n\r\n    let bbv = await getTemas(idDocenteActual, idMateriaActual, periodoActual, cierreActual);\r\n    setListas(datalista)\r\n    console.log(bbv)\r\n\r\n    console.log(\"<<<<\")\r\n    console.log(datalista)\r\n    console.log(idMateriaActual + ' _actual id')\r\n    console.log(vc + ' _actual id')\r\n\r\n  };\r\n\r\n  const [calificaciones, setcalificaciones] = React.useState({ datalistaAlumnos })\r\n  const [MATERIA_ID, setMATERIA_ID] = React.useState([]);\r\n  const [CRITERIOS, setCRITERIOS] = React.useState([])\r\n\r\n  const obtenerTema = async (tem) => {//inico\r\n    let numTemas = tem.target.value;\r\n\r\n    //buscar lista alumnos  idMateria, idDocente\r\n    await getAlumnos(MATERIA_ID, PERIODO_ACTUAL);//LISTA DE ALUMNOS\r\n    await getCriterios(PERIODO_ACTUAL, MATERIA_ID, numTemas);// LISTA DE CRITERIO\r\n\r\n\r\n    await setcalificaciones({ datalistaAlumnos: datalistaAlumnos });\r\n    await setCRITERIOS(dataCriterios);\r\n    console.log(calificaciones)\r\n    console.log('ver tema inf.. ' + numTemas + ' materia = ' + MATERIA_ID + ' periodo ' + PERIODO_ACTUAL)\r\n    console.log(listasTemas)\r\n    console.log('VER.. ')\r\n    console.log(dataCriterios)\r\n\r\n\r\n  }//fin\r\n\r\n\r\n\r\n\r\n  const manejador = (cc1, cc2, cc3) => {//creador de table\r\n    console.log(\"imprimiendo.....\" + tema1X)\r\n    console.log(\"datos new.....\" + cc1 + cc2 + cc3)\r\n  };\r\n\r\n  const [ac, setAc] = React.useState('none');//guardar porcentaje #########\r\n\r\n  const guardarPorcentaje = (e) => {\r\n\r\n    var input = document.getElementById('porcentajeC1');\r\n    input.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n    if (input.value.length === 2) {\r\n      setAc('block');\r\n      \r\n      swal({\r\n        title: \"Are you sure?\",\r\n        text: \"Once deleted, you will not be able to recover this imaginary file!\",\r\n        icon: \"warning\",\r\n        buttons: true,\r\n        dangerMode: true,\r\n      })\r\n      .then((guardar) => {\r\n        if (guardar) {\r\n          guardar_nuevo_criterio()\r\n          \r\n        } else {\r\n          swal(\"Your imaginary file is safe!\");\r\n        }\r\n      });\r\n\r\n      console.log(input)\r\n      //document.getElementById('most').style = 'none';\r\n      setAc('none');// falta\r\n    }\r\n\r\n    var input2 = document.getElementById('porcentajeC2');//inicio2\r\n    input2.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n    if (input2.value.length === 2) {\r\n      setAc('block');\r\n      console.log(\"guardar cambios cambio....\" + input2.value)\r\n      setAc('none');// falta\r\n    } // fin 2\r\n\r\n    var input3 = document.getElementById('porcentajeC3');//inicio3\r\n    input3.addEventListener('input', function () {\r\n      if (this.value.length > 2)\r\n        this.value = this.value.slice(0, 2);\r\n    })\r\n\r\n    if (input3.value.length === 2) {\r\n      setAc('block');\r\n      console.log(input.value + ' :_ : ' + input2.value + ':_ :' + input3.value)\r\n      setAc('none');// falta\r\n    } // fin 3\r\n\r\n\r\n    if ((parseInt(input.value)) > 100) {\r\n      alert('no puede eceder mas 100 %')\r\n    }\r\n    else {\r\n      if (parseInt(input.value) + parseInt(input2.value) > 100) {\r\n        alert('no puede eceder mas 100 %')\r\n      }\r\n      else {\r\n        if (parseInt(input.value) + parseInt(input2.value) + parseInt(input3.value) > 100) {\r\n          alert('no puede eceder mas 100 %')\r\n        }\r\n      }\r\n    }\r\n   \r\n  }//fin\r\n\r\n  const guardar_nuevo_criterio = (dato) => {\r\n    //CRITERIOS\r\nconsole.log('guardado')\r\nswal(\"Poof! Your imaginary file has been deleted!\", {\r\n  icon: \"success\",\r\n});\r\n  }\r\n\r\n\r\n  const [alumnos, setAlumnos] = React.useState({\r\n    columns: [\r\n      { title: 'Nª', field: 'id', editable: 'never' },\r\n      { title: 'Control', field: 'control', editable: 'never' },\r\n      { title: 'Nombre', field: 'nameAlumno', editable: 'never' },\r\n      {\r\n        title: 'Curso',\r\n        field: 'curso',\r\n        editable: 'never',\r\n        // lookup: { 34: 'İstanbul', 63: 'Şanlıurfa' },\r\n      },\r\n      { title: 'Opcion', field: 'opcion', editable: 'never' },\r\n      { title: 'C1', field: 'calR1', },\r\n      { title: 'C2', field: 'calR2', },\r\n      { title: 'C3', field: 'calR3', },\r\n      { title: '#', field: '#', editable: 'never' },\r\n      { title: <input className=\"inputTemas\" type=\"number\" id=\"porcentajeC1\" placeholder={CRITERIOS.porcentajeC1} style={{ width: '4ch' }} onChange={guardarPorcentaje} ></input>, field: 'calCriterio1', editable: 'never', minWidth: 10 },\r\n      { title: <input className=\"inputTemas\" id=\"porcentajeC2\" placeholder={CRITERIOS.porcentajeC2} style={{ width: '4ch' }} onChange={guardarPorcentaje} ></input>, field: 'calCriterio2', editable: 'never', minWidth: 10 },\r\n      { title: <input className=\"inputTemas\" id=\"porcentajeC3\" placeholder={CRITERIOS.porcentajeC3} style={{ width: '4ch' }} onChange={guardarPorcentaje}  ></input>, field: 'calCriterio3', editable: 'never' },\r\n      { title: 'Total', field: 'calificaciontotal', editable: 'never' },\r\n    ],\r\n    generalAlumnos\r\n  })\r\n\r\n  //\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12}>\r\n          <h3 > INSTITUTO TECNOLOGICO SUPERIOR DE LOS RIOS </h3>\r\n        </Grid>\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.paperperiodos}>PERIODO: {dataMateria[0].idnomenclaturaPeriodo}</Paper>\r\n        </Grid>\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.paperperiodos}>CIERRE DE ACTA: {fecha1}</Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <Paper elevation={0} ><p id=\"most\" style={{ display: ac }}>espere..<LinearProgress variant=\"query\" /></p></Paper>\r\n        </Grid>\r\n\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.papermaterias}>\r\n            <FormControl variant=\"outlined\" className={estilos.formControl}>\r\n              <InputLabel id=\"InputLabel\">Materia</InputLabel>\r\n              <Select\r\n                labelId=\"demo-simple-select-outlined\"\r\n                id=\"materia\"\r\n                valeu=\"\"\r\n                onChange={buscarTema}\r\n                label=\"Materia\"\r\n              >\r\n\r\n                {\r\n                  dataMateria.map((materias) => (<MenuItem key={materias.nm} value={materias.idMateria} >{materias.nombre + ' (' + materias.semestre + \"/\" + materias.nomenclatura + \") \" + materias.nombreCorto}</MenuItem>))\r\n                }\r\n\r\n              </Select>\r\n            </FormControl>\r\n          </Paper>\r\n        </Grid>\r\n\r\n        <Grid item xs={6} sm={3}>\r\n          <Paper elevation={0} className={estilos.papermaterias}>\r\n            <FormControl variant=\"outlined\" className={estilos.formControl}>\r\n              <InputLabel id=\"demo-simple-select-outlined-labe\">Unidad</InputLabel>\r\n              <Select\r\n                labelId=\"demo-simple-select-outlined-labe\"\r\n                id=\"unidad\"\r\n                label=\"Unidad\"\r\n                onChange={obtenerTema}\r\n              >\r\n                {\r\n                  listasTemas.map((tem, i) => (<MenuItem key={i} value={tem.numUnidad}>{tem.tema}</MenuItem>))\r\n\r\n                }\r\n              </Select>\r\n            </FormControl>\r\n\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n\r\n        </Grid>\r\n\r\n\r\n        <Grid item xs={12} sm={12}>\r\n          \r\n          {/*   <Paper > <Paper className={classes.root}>\r\n    <TableContainer className={classes.container}>*/}\r\n          <Paper elevation={3} >\r\n          <button>guardar</button>\r\n            <MaterialTable\r\n              title=\"Captura de calificaciones\"\r\n              columns={alumnos.columns}//columnas\r\n              data={calificaciones.datalistaAlumnos}//filas\r\n\r\n              actions={[\r\n                {\r\n                  icon: 'save',\r\n                  tooltip: 'Save User',\r\n                  onClick: (event, rowData) => alert(\"You saved \" + rowData.control + \" c1=\" + rowData.calR1)\r\n                }\r\n              ]}\r\n\r\n              editable={\r\n                {\r\n                  // filsa: rowData => rowData.id === '1',\r\n                  onRowUpdate: (newData, oldData) =>\r\n                    new Promise(resolve => {\r\n                      setTimeout(() => {\r\n                        resolve();\r\n\r\n                        if (oldData) {\r\n\r\n                          //actualizacion del estado\r\n                          updateCalificacion(newData)\r\n\r\n                          setcalificaciones(prevState => {\r\n                            const datalistaAlumnos = [...prevState.datalistaAlumnos];//obtenr data\r\n                            //console.log(newData.nombre = 'sam')//estado fila modificado\r\n                            console.log(newData.calCriterio1 = (newData.calR1 * (porcentaje[0].t1 / 100)))\r\n                            console.log(newData.calCriterio2 = (newData.calR2 * (porcentaje[0].t2 / 100)))\r\n                            console.log(newData.calCriterio3 = (newData.calR3 * (porcentaje[0].t3 / 100)))\r\n                            console.log(newData.calificaciontotal = (newData.calR1 + newData.calR2 + newData.calR3))\r\n\r\n                            console.log(newData)//estado fila modificado\r\n\r\n                            datalistaAlumnos[datalistaAlumnos.indexOf(oldData)] = newData;\r\n                            // manejador(newData.c1, newData.c2, newData.c3)\r\n\r\n                            return { ...prevState, datalistaAlumnos };\r\n                          });\r\n\r\n\r\n\r\n                        }\r\n                      }, 600);\r\n                    }),\r\n\r\n                }\r\n              }\r\n\r\n              options={{\r\n                headerStyle: {\r\n                  backgroundColor: '#01579b',\r\n                  color: '#FFF'\r\n                }\r\n              }}\r\n\r\n            \r\n\r\n              \r\n\r\n            />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <Paper >*O: Ordinario   *1:Primera oportunidad   *NA: No Alcanza</Paper>\r\n          <Paper >*R: Repeticion   *2:Segunda oportunidad</Paper>\r\n          <Paper >*E: Especial</Paper>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            onClick={manejador}\r\n            startIcon={<SaveIcon />}\r\n          >\r\n            Descargar Reporte de Calificaciones\r\n    </Button>\r\n\r\n        </Grid>\r\n      </Grid>\r\n\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  generalAlumnos: state.alumnosState,\r\n  materiasDocentes: state.materias,\r\n  porcentaje: state.porcentaje\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\r\n  updateCalificacion(calificacionNew) {\r\n    dispatch({\r\n      type: \"updateCalificacion\",\r\n      calificacionNew\r\n    })\r\n  }\r\n\r\n\r\n})\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MaterialTableDemo)"]},"metadata":{},"sourceType":"module"}